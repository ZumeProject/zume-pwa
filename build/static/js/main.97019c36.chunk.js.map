{"version":3,"sources":["Sessions lazy /^/.//.*$/ groupOptions: {} namespace object","Redux/language/index.js","Redux/counter/index.js","Redux/lifecycle/index.js","Redux/downloads/index.js","Components/zume/translationHooks.js","Redux/sessions/index.js","Utils/session/sectionLength.js","Redux/live/index.js","Redux/groups/index.js","Redux/forms/index.js","Redux/downloads/cache.js","Redux/store.js","I18n/index.js","serviceWorker.js","Components/shared/navigation/RoutedBottomNavigation.js","Utils/browser/currentPathAndPrefix.js","Components/zume/ZumeAppNavigation.js","Components/zume/ZumeViewWithNav.js","Components/shared/BannerWithAvatar.js","Utils/browser/userAgent.js","Components/shared/IOSShareIcon.js","Components/shared/lifecycle/InstallOrUpdateBanner.js","Components/shared/lifecycle/InstallOrUpdateButton.js","Components/zume/ZumeInstallButton.js","Components/zume/ZumeInstallBanner.js","Components/zume/ZumeLogo.js","Utils/browser/useBasenameUrl.js","Components/shared/session/SessionGridList.js","Pages/App.js","Components/shared/navigation/ListItemLink.js","Pages/Menu.js","Components/shared/LanguageSelector.js","Pages/Language.js","Utils/session/partPreview.js","Components/shared/session/SessionSectionList.js","Components/shared/ZoomInFAB.js","Pages/Sessions.js","Components/shared/live/LiveSessionWrapper.js","Components/shared/live/views/Description.js","Components/shared/live/views/InfoPart.js","Components/shared/live/views/Section.js","Utils/browser/openUrl.js","Components/shared/live/views/BasicPart.js","Components/shared/live/views/DiscussPart.js","Components/shared/live/views/ReadPart.js","Components/shared/live/views/SharePart.js","Components/shared/Video.js","Components/shared/live/views/WatchPart.js","Components/shared/live/views/ListenPart.js","Components/shared/live/views/SeePart.js","Components/shared/form/EditableTable.js","Components/shared/live/views/FormPart.js","Components/shared/form/typeToComponent.js","Components/shared/live/views/typeToView.js","Components/shared/live/CountdownTimer.js","Pages/LiveSession.js","Components/zume/ZumePersistButton.js","Redux/downloads/storage.js","Components/shared/QuotaDisplay.js","Components/shared/CircularIntegration.js","Components/shared/AlertDialog.js","Components/shared/session/SessionDownloadList.js","Redux/downloads/ProgressReportFetcher.js","Redux/downloads/effects.js","Pages/Downloads.js","Pages/About.js","routes.js","theme.js","rtl.js","Components/shared/Splash.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","t","keys","Object","module","exports","languageSlice","createSlice","name","initialState","rtl","reducers","changeLanguage","state","action","payload","i18n","dir","selectLanguage","language","counterSlice","increment","decrement","lifecycleSlice","firstVisit","updateAvailable","installable","installing","deferredPrompt","standalone","workbox","externalServiceWorker","firstVisitChecked","workboxReady","appInstallable","appInstalling","appInstalled","appUpdateDetected","appUpdated","externalServiceWorkerDetected","appIsStandalone","selectLifecycle","lifecycle","downloadsSlice","queue","downloading","errors","offlineAssets","storage","downloadQueued","addObjByUrl","downloadStarted","url","removeByUrl","downloadProgressed","loaded","total","d","downloadErrored","error","downloadCancelled","clearError","downloadCompleted","downloadDeleted","usageEstimated","quota","usage","persistChecked","persisted","arr","obj","i","push","filter","a","selectDownloads","downloads","selectOfflineAssets","createSelector","selectIsAssetOffline","_","hasOwnProperty","selectErrors","selectStorage","selectQueue","selectDownloading","selectDownloadingAssetByUrl","getNextQueuedDownload","getDownloadingCount","length","useAppTranslation","useTranslation","hasProtocol","normalizeAssetUrl","lam","baseUrl","test","useLocalizedAsset","useLocalizedAssetMapper","key","fixedT","getFixedT","returnObjects","sessionsSlice","loading","meta","sessions","content","about","sessionsContentLoading","sessionsContentLoaded","sessionsContentFailedToLoad","aboutContentLoaded","actions","selectSessions","selectAbout","selectSession","sessionId","getSessionTitles","s","title","getSessionPaths","totalAssetSize","assets","localizedAssetMapper","reduce","acc","current","size","filterToDownloadableAssets","type","selectSessionSizes","assetReferences","localizedAsset","downloadableAssets","downloadedAssets","filterToDownloadedAssets","downloadingAssets","filterToDownloadingAssets","queuedAssets","findIndex","q","filterToQueuedAssets","assetsInError","filterToAssetsInError","offlineAccess","currentOfflineSize","sessionSize","offlineProgress","Math","round","isDownloading","isQueued","hasErrors","assetsInErrorWithErrors","aie","session","sectionLength","section","parts","listSectionsByAccumulatedLength","sections","list","liveSlice","part","reset","sectionsLoaded","changed","isInBound","slideIndexChanged","index","maxIndex","priorLength","getSectionAndPartFromIndex","selectLive","live","selectPartIndex","selectCurrentPartContent","info","duration","sectionIndex","getContentForSectionAndPart","selectCurrentSlideIndex","getIndexFromSectionAndPart","groupsSlice","groupsLoaded","groupSelected","groupCreated","groupUpdated","groupIndex","group","splice","groupDeleted","formsSlice","data","formDataUpdated","formDataDeleted","selectFormData","forms","selectFormsByName","names","formData","result","forEach","n","cacheName","assetCacheName","getCache","caches","open","delete","putInCache","request","response","cache","put","deleteFromCache","persistConfig","createOffline","offlineConfig","persist","offlineMiddleware","middleware","offlineEnhanceReducer","enhanceReducer","offlineEnhanceStore","enhanceStore","combineReducers","counter","reducer","groups","createAction","persistedReducer","persistReducer","undefined","deleteCache","store","configureStore","getDefaultMiddleware","serializableCheck","ignoredActions","enhancers","persistor","persistStore","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","debug","process","interpolation","escapeValue","backend","loadPath","keySeparator","nsSeparator","load","syncI18nAndReduxLanguage","loadNamespaces","dispatch","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","wb","Workbox","addEventListener","event","onUpdate","reload","handleNewServiceWorker","onExternalUpdate","sw","handleNewExternalServiceWorker","register","registration","setWorkbox","onupdatefound","installingWorker","onstatechange","navigator","serviceWorker","controller","console","log","onSuccess","catch","RoutedBottomNavigation","className","navigation","useNavigation","currentRoute","basename","prefix","currentPath","route","pathname","getCurrentPath","currentPathAndPrefix","useCurrentRoute","path","React","useState","value","setValue","BottomNavigation","onChange","newValue","navigate","showLabels","BottomNavigationAction","label","icon","classes","makeStyles","stickToBottom","width","position","bottom","borderTop","ZumeAppNavigation","defaultActions","renderNotFound","ZumeViewWithNav","children","render","BannerWithAvatar","message","buttons","avatar","Box","clone","pt","pr","pb","pl","m","Paper","elevation","Grid","container","spacing","alignItems","wrap","item","Typography","justify","b","isSafariIOS","isSafari","userAgent","indexOf","isChrome","isSafariOnly","IOSShareIcon","props","SvgIcon","viewBox","stroke","stroke-linecap","stroke-linejoin","y2","x2","y1","x1","stroke-width","fill","transform","fill-opacity","InstallOrUpdateBanner","hidden","showUpdateMessage","avatarClassName","button","Avatar","theme","show","display","hide","InstallOrUpdateButton","text","onClick","displayStyle","Button","variant","color","clsx","aria-label","ZumeInstallButton","forceShow","useDispatch","useSelector","onClickInstall","prompt","userChoice","outcome","postMessage","messageSW","useStyles","palette","primary","contrastText","backgroundColor","main","ZumeInstallBanner","iOSFirstVisit","favicon","height","small","medium","large","ZumeLogo","src","alt","useBasenameUrl","gridList","flexWrap","gridListWrapped","justifyContent","tile","breakpoints","down","up","unselectedTile","light","SessionGridList","selectedId","animate","useTheme","mdMatch","useMediaQuery","tileRef","createRef","useEffect","scrollIntoView","root","cols","wrapped","transitionDuration","enter","transitions","enteringScreen","exit","leavingScreen","GridList","cellHeight","tileClass","SessionGridListItem","ref","Zoom","in","timeout","style","transitionDelay","unmountOnExit","forwardRef","href","GridListTile","boxShadow","textAlign","cursor","App","titles","Container","bgcolor","component","maxWidth","p","ListItemLink","ListItem","Link","background","paper","Menu","trans","asset","resetting","setResetting","flexGrow","List","subheader","ListSubheader","ListItemIcon","ListItemText","confirm","RESET_STATE","setTimeout","ListItemSecondaryAction","CircularProgress","target","Divider","LanguageSelector","selected","languages","enDisplayName","nativeName","l","secondary","LanguageSettings","lng","processRecursively","Array","isArray","SessionSectionList","expanded","setExpanded","panel","ExpansionPanel","isExpanded","ExpansionPanelSummary","expandIcon","aria-controls","marginTop","ExpansionPanelDetails","toUpperCase","partPreview","Fragment","secondaryTypographyProps","noWrap","wrapper","left","fab","margin","common","white","extendedIcon","marginRight","ZoomInFAB","Icon","Fab","Sessions","padding","grow","bottomBar","top","EnhancedSwipeableViews","bindKeyboard","virtualize","SwipeableViews","LiveSessionWrapper","slideRenderer","slideCount","onChangeIndex","centerNavElement","onExit","AppBar","Toolbar","IconButton","edge","enableMouseEvents","link","textDecoration","Description","processObject","domKey","image","processArray","lines","j","InfoPart","Section","openUrl","BasicPart","DiscussPart","questions","questionsElement","ReadPart","SharePart","video","aspectRatioBox","overflow","paddingTop","border","aspectRatioBoxInside","flexboxCentering","fontSize","Video","placeholder","setPlaceholder","controls","autoPlay","WatchPart","showScript","script","scriptLabel","videoUrl","audio","ListenPart","audioUrl","SeePart","xs","sm","md","tableIcons","Add","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","basicVariantOptions","search","actionsColumnIndex","actionsCellStyle","headerStyle","rowStyle","cellStyle","showFirstLastPageButtons","pageSize","pageSizeOptions","addRowPosition","emptyRowsWhenPaging","EditableTable","columns","formName","clonedData","cloneDeep","localizedColumns","c","lookup","localizedC","editable","onRowAdd","newRowData","reject","newData","unshift","onRowUpdate","oldData","onRowDelete","options","icons","FormPart","downloadLabel","downloadKey","formElement","opts","typeToComponent","typeToView","minutes","remaining","setRemaining","interval","setInterval","clearInterval","seconds","negative","floor","fm","fs","formatRemainingTime","LiveSession","selectedIndex","partIndex","html","document","querySelector","originalFontSize","durationKey","totalSlides","totalSectionLengths","backHref","indexBaseHref","countdown","CountdownTimer","sectionElement","partElement","ZumePersistButton","mb","HAS_STORAGE","isStoragePersisted","tryPersistWithoutPromptingUser","permissions","query","permission","QuotaDisplay","persistButton","percent","toFixed","max","iconButtonProgress","zIndex","CircularIntegration","iconButton","AlertDialog","description","handleClose","Dialog","onClose","scroll","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","SessionDownloadList","sessionsWithSizes","onDownload","onDelete","onCancel","actionLabel","generateIconButton","cancel","innerIconButton","filesize","ErrorDialogWithButton","onAccept","setOpen","rel","autoFocus","ProgressReportFetcher","onProgress","this","input","Request","_cancelRequested","fetch","body","getReader","ok","status","statusText","contentLength","headers","get","parseInt","_reader","me","Response","ReadableStream","start","cancelRequested","close","read","done","call","byteLength","enqueue","download","getState","startDownload","progressFetcher","throttle","estimateUsage","startNextDownloadIfPossible","hasCapacity","nextQueuedDownload","estimate","Downloads","storageEstimate","persistStorage","ph","deleteDownload","downloadingAsset","cancelDownload","CloudDownloadIcon","About","nonNavViews","toMount","view","params","isNaN","routes","mount","compose","withView","some","v","startsWith","responsiveFontSizes","createMuiTheme","red","A400","default","typography","body1","body2","caption","jss","create","plugins","jssPreset","RTL","StylesProvider","RTLTheme","direction","DirectionalOuterTheme","onLanguageChanged","currentIsRTL","onRtlChange","on","off","ThemeProvider","Splash","Sentry","dsn","ReactDOM","CssBaseline","fallback","getElementById","URL","origin","contentType","ready","unregister","checkValidServiceWorker","preventDefault","evt","matchMedia","matches","paths","aboutContent"],"mappings":"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","file":"static/js/main.97019c36.chunk.js","sourcesContent":["var map = {\n\t\"./\": [\n\t\t124\n\t],\n\t\"./01\": [\n\t\t448,\n\t\t1\n\t],\n\t\"./01.json\": [\n\t\t448,\n\t\t1\n\t],\n\t\"./02\": [\n\t\t449,\n\t\t2\n\t],\n\t\"./02.json\": [\n\t\t449,\n\t\t2\n\t],\n\t\"./03\": [\n\t\t450,\n\t\t3\n\t],\n\t\"./03.json\": [\n\t\t450,\n\t\t3\n\t],\n\t\"./04\": [\n\t\t451,\n\t\t4\n\t],\n\t\"./04.json\": [\n\t\t451,\n\t\t4\n\t],\n\t\"./05\": [\n\t\t452,\n\t\t5\n\t],\n\t\"./05.json\": [\n\t\t452,\n\t\t5\n\t],\n\t\"./06\": [\n\t\t453,\n\t\t6\n\t],\n\t\"./06.json\": [\n\t\t453,\n\t\t6\n\t],\n\t\"./07\": [\n\t\t454,\n\t\t7\n\t],\n\t\"./07.json\": [\n\t\t454,\n\t\t7\n\t],\n\t\"./08\": [\n\t\t455,\n\t\t8\n\t],\n\t\"./08.json\": [\n\t\t455,\n\t\t8\n\t],\n\t\"./09\": [\n\t\t456,\n\t\t9\n\t],\n\t\"./09.json\": [\n\t\t456,\n\t\t9\n\t],\n\t\"./10\": [\n\t\t457,\n\t\t10\n\t],\n\t\"./10.json\": [\n\t\t457,\n\t\t10\n\t],\n\t\"./about\": [\n\t\t447,\n\t\t0\n\t],\n\t\"./about.json\": [\n\t\t447,\n\t\t0\n\t],\n\t\"./index\": [\n\t\t124\n\t],\n\t\"./index.json\": [\n\t\t124\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 468;\nmodule.exports = webpackAsyncContext;","import { createSlice } from '@reduxjs/toolkit';\nimport i18n from 'i18next';\n\nconst languageSlice = createSlice({\n  name: 'language',\n  initialState: {\n    code: 'en',\n    rtl: false\n  },\n  reducers: {\n    changeLanguage(state, action) {\n      const { code } = action.payload;\n      if (state.code !== code) {\n        state.code = code;\n        state.rtl = i18n.dir(code) === 'rtl';\n      }\n      return state;\n    }\n  }\n});\n\nexport const selectLanguage = state => state.language;\n\nexport default languageSlice;\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst counterSlice = createSlice({\n  name: 'counter',\n  initialState: 0,\n  reducers: {\n    increment: state => state + 1,\n    decrement: state => state - 1\n  }\n});\n\nexport const selectCounter = state => state.counter;\n\nexport default counterSlice;\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst lifecycleSlice = createSlice({\n  name: 'lifecycle',\n  initialState: {\n    firstVisit: null,\n    updateAvailable: false,\n    installable: false,\n    installing: false,\n    deferredPrompt: null,\n    standalone: false,\n    workbox: null,\n    externalServiceWorker: null\n  },\n  reducers: {\n    firstVisitChecked(state) {\n      if (state.firstVisit === null) {\n        state.firstVisit = true;\n      } else if (state.firstVisit) {\n        state.firstVisit = false;\n      }\n      return state;\n    },\n    workboxReady(state, action) {\n      state.workbox = action.payload;\n      return state;\n    },\n    appInstallable(state, action) {\n      state.deferredPrompt = action.payload;\n      state.installable = true;\n      return state;\n    },\n    appInstalling(state) {\n      state.deferredPrompt = null;\n      state.installing = true;\n      return state;\n    },\n    appInstalled(state) {\n      state.installable = false;\n      state.installing = false;\n      return state;\n    },\n    appUpdateDetected(state, action) {\n      state.updateAvailable = true;\n      return state;\n    },\n    appUpdated(state) {\n      state.updateAvailable = false;\n      state.externalServiceWorker = null;\n      return state;\n    },\n    externalServiceWorkerDetected(state, action) {\n      state.externalServiceWorker = action.payload;\n      return state;\n    },\n    appIsStandalone(state) {\n      state.standalone = true;\n      return state;\n    }\n  }\n});\n\nexport const selectLifecycle = state => state.lifecycle;\n\nexport default lifecycleSlice;\n","import { createSlice, createSelector } from '@reduxjs/toolkit';\n\n/**\n * The downloads slice is for handling the state and logic\n * around making assets available offline.\n *\n * It is used to help determine which sessions\n * (with all its assets) are available offline,\n * but it is not responsible for that logic.\n *\n * It simply operates on {key, url} that needs to be\n * available offline.\n */\n\nconst downloadsSlice = createSlice({\n  name: 'downloads',\n  initialState: {\n    queue: [],\n    downloading: [],\n    errors: {},\n    offlineAssets: {},\n    storage: {}\n  },\n  reducers: {\n    downloadQueued(state, action) {\n      addObjByUrl(state.queue, action.payload);\n      return state;\n    },\n    downloadStarted(state, action) {\n      const { url } = action.payload;\n      state.queue = removeByUrl(state.queue, url);\n      addObjByUrl(state.downloading, action.payload);\n      return state;\n    },\n    downloadProgressed(state, action) {\n      const { url, loaded, total } = action.payload;\n      state.downloading = state.downloading.map(d => {\n        if (d.url === url) {\n          d.loaded = loaded;\n          d.total = total;\n        }\n        return d;\n      });\n      return state;\n    },\n    downloadErrored(state, action) {\n      const { url, error } = action.payload;\n      let errors = state.errors || {};\n      errors[url] = error;\n      state.errors = errors;\n      return state;\n    },\n    downloadCancelled(state, action) {\n      const { url } = action.payload;\n      state.queue = removeByUrl(state.queue, url);\n      state.downloading = removeByUrl(state.downloading, url);\n      state = clearError(state, url);\n      return state;\n    },\n    downloadCompleted(state, action) {\n      const { url } = action.payload;\n      state.downloading = removeByUrl(state.downloading, url);\n      state.offlineAssets[url] = action.payload;\n      state = clearError(state, url);\n      return state;\n    },\n    downloadDeleted(state, action) {\n      const { url } = action.payload;\n      delete state.offlineAssets[url];\n      state = clearError(state, url);\n      return state;\n    },\n    usageEstimated(state, action) {\n      const { quota, usage } = action.payload;\n      state.storage = state.storage || {};\n      state.storage.quota = quota;\n      state.storage.usage = usage;\n      return state;\n    },\n    persistChecked(state, action) {\n      state.storage = state.storage || {};\n      state.storage.persisted = action.payload;\n      return state;\n    }\n  }\n});\n\n// Needed for migration purposes\n// because we changed state.error to state.errors\n// TODO clean up if we have redux-persist migration capabilities.\nfunction clearError(state, url) {\n  let errors = state.errors || {};\n  delete errors[url];\n  state.errors = errors;\n  return state;\n}\n\nfunction addObjByUrl(arr, obj) {\n  if (!arr || !obj) return;\n  for (let i in arr) {\n    if (arr[i].url === obj.url) {\n      return;\n    }\n  }\n  arr.push(obj);\n}\n\nfunction removeByUrl(arr, url) {\n  return arr.filter(a => a.url !== url);\n}\n\nexport const selectDownloads = state => state.downloads;\nexport const selectOfflineAssets = createSelector(\n  selectDownloads,\n  downloads => {\n    return downloads.offlineAssets;\n  }\n);\nexport const selectIsAssetOffline = createSelector(\n  selectOfflineAssets,\n  (_, url) => url,\n  (offlineAssets, url) => {\n    return offlineAssets.hasOwnProperty(url);\n  }\n);\nexport const selectErrors = createSelector(\n  selectDownloads,\n  downloads => downloads.errors\n);\nexport const selectIsAssetInError = createSelector(\n  selectErrors,\n  (_, url) => url,\n  (errors, url) => errors.hasOwnProperty(url)\n);\n\nexport const selectStorage = createSelector(\n  selectDownloads,\n  downloads => downloads.storage\n);\nexport const selectQueue = createSelector(\n  selectDownloads,\n  downloads => downloads.queue\n);\nexport const selectDownloading = createSelector(\n  selectDownloads,\n  downloads => downloads.downloading\n);\nexport const selectDownloadingAssetByUrl = createSelector(\n  selectDownloading,\n  (_, url) => url,\n  (downloading, url) => {\n    for (const d of downloading) {\n      if (d.url === url) {\n        return d;\n      }\n    }\n    return null;\n  }\n);\nexport const getNextQueuedDownload = createSelector(\n  selectDownloads,\n  downloads => {\n    return downloads.queue[0];\n  }\n);\nexport const getDownloadingCount = createSelector(\n  selectDownloads,\n  downloads => {\n    return downloads.downloading.length;\n  }\n);\n\nexport default downloadsSlice;\n","import { useTranslation } from 'react-i18next';\n\nexport function useAppTranslation() {\n  const { t } = useTranslation('zume');\n  return t;\n}\n\nconst metaKey = 'meta';\nconst hasProtocol = /^https:/;\n/**\n *\n * Normalizes an asset url. If it begins with https: we pass through, otherwise\n * we prepend the baseUrl specified in the meta key of the asset localization file.\n *\n * @param {string} url the url to normalize\n * @param {object} lam a result from useLocalizedAssetMapper so we can get the metaKey\n */\nexport function normalizeAssetUrl(url, lam) {\n  // the url needs the basePath prepended\n  const { baseUrl } = lam(metaKey) || '';\n  if (hasProtocol.test(url)) {\n    return url;\n  } else {\n    return baseUrl + url;\n  }\n}\n\nexport function useLocalizedAsset() {\n  const t = useLocalizedAssetMapper();\n  return key => {\n    const { url } = t(key);\n    return normalizeAssetUrl(url, t);\n  };\n}\n\nexport function useLocalizedAssetMapper() {\n  const { i18n } = useTranslation();\n  const fixedT = i18n.getFixedT(i18n.language, 'zume-assets');\n  const t = key => fixedT(key, { returnObjects: true });\n  return t;\n}\n","import { createSlice, createSelector } from '@reduxjs/toolkit';\nimport sessions from 'Sessions/index.json';\nimport {\n  selectOfflineAssets,\n  selectDownloading,\n  selectQueue,\n  selectErrors\n} from '../downloads';\nimport { normalizeAssetUrl } from 'Components/zume/translationHooks';\n\nconst sessionsSlice = createSlice({\n  name: 'sessions',\n  initialState: {\n    loading: false,\n    meta: sessions,\n    content: [],\n    about: null,\n    error: null\n  },\n  reducers: {\n    sessionsContentLoading(state) {\n      state.loading = true;\n      state.error = null;\n      return state;\n    },\n    sessionsContentLoaded(state, action) {\n      state.content = action.payload;\n      state.loading = false;\n      return state;\n    },\n    sessionsContentFailedToLoad(state, action) {\n      state.content = [];\n      state.error = action.payload;\n      return state;\n    },\n    aboutContentLoaded(state, action) {\n      state.about = action.payload;\n      return state;\n    }\n  }\n});\n\nexport default sessionsSlice;\nexport const {\n  sessionsContentLoading,\n  sessionsContentLoaded,\n  sessionsContentFailedToLoad,\n  aboutContentLoaded\n} = sessionsSlice.actions;\n\nexport const selectSessions = state => state.sessions;\nexport const selectAbout = createSelector(selectSessions, sessions => {\n  return sessions.about;\n});\n\nexport const selectSession = createSelector(\n  selectSessions,\n  (_, sessionId) => sessionId,\n  (sessions, sessionId) => {\n    return sessions.content[sessionId];\n  }\n);\n\n// TODO find a better way to specify id that can be consistently used\n// NOTE the technique here is used in other selectors in this file too...\nexport const getSessionTitles = createSelector([selectSessions], sessions => {\n  return sessions.content.map((s, i) => ({ id: `${i}`, title: s.t }));\n});\n\nexport const getSessionPaths = createSelector([selectSessions], sessions => {\n  return sessions.meta.sessions;\n});\n\nfunction totalAssetSize(assets, localizedAssetMapper) {\n  return assets.reduce((acc, current) => {\n    const size = current.size || 0;\n    return acc + size;\n  }, 0);\n}\n\n/**\n * Filter out certain types of session assets that\n * cannot be downloaded for offline use such as\n * external links\n */\nexport function filterToDownloadableAssets(assets) {\n  return assets.filter(a => {\n    return a.type !== 'link';\n  });\n}\n\n/**\n * Filters the list of assets by url matches in the offlineAssets set.\n * @param {array} assets\n * @param {set} offlineAssets\n */\nfunction filterToDownloadedAssets(assets, offlineAssets) {\n  return assets.filter(a => {\n    const url = a.url;\n    return offlineAssets.hasOwnProperty(url);\n  });\n}\n\n/**\n * Filters the list of assets by url matches in the offlineAssets set.\n * @param {array} assets\n * @param {set} errors\n */\nfunction filterToAssetsInError(assets, errors) {\n  return assets.filter(a => {\n    const url = a.url;\n    return errors?.hasOwnProperty(url);\n  });\n}\n\n/**\n * Filters the list of assets by url matches to the list of\n * assets currently downloading. It also sets the size to be\n * the current downloading progress.\n * @param {array} assets\n * @param {array} downloading\n */\nfunction filterToDownloadingAssets(assets, downloading) {\n  const downloadingAssetsWithProgress = assets.map(a => {\n    for (let d of downloading) {\n      if (d.url === a.url) {\n        return {\n          ...a,\n          size: d.loaded\n        };\n      }\n    }\n    return null;\n  });\n\n  return downloadingAssetsWithProgress.filter(a => a !== null);\n}\n\n/**\n * Filters the list of assets to urls that are\n * in the list of assets currently queued.\n * @param {array} assets\n * @param {array} queue\n */\nfunction filterToQueuedAssets(assets, queue) {\n  return assets.filter(a => {\n    return queue.findIndex(q => a.url === q.url) > -1;\n  });\n}\n\nexport const selectSessionSizes = createSelector(\n  selectSessions,\n  (_, localizedAssetMapper) => localizedAssetMapper,\n  selectOfflineAssets,\n  selectErrors,\n  selectDownloading,\n  selectQueue,\n  (\n    sessions,\n    localizedAssetMapper,\n    offlineAssets,\n    errors,\n    downloading,\n    queue\n  ) => {\n    return sessions.content.map((s, i) => {\n      const assetReferences = s.assets.map(a => {\n        const localizedAsset = localizedAssetMapper(a.key) || {};\n        localizedAsset.type = a.type;\n        localizedAsset.url = normalizeAssetUrl(\n          localizedAsset.url,\n          localizedAssetMapper\n        );\n        return localizedAsset;\n      });\n      const downloadableAssets = filterToDownloadableAssets(assetReferences);\n      const downloadedAssets = filterToDownloadedAssets(\n        downloadableAssets,\n        offlineAssets\n      );\n      const downloadingAssets = filterToDownloadingAssets(\n        downloadableAssets,\n        downloading\n      );\n      const queuedAssets = filterToQueuedAssets(downloadableAssets, queue);\n      const assetsInError = filterToAssetsInError(downloadableAssets, errors);\n\n      const offlineAccess =\n        downloadedAssets.length === downloadableAssets.length;\n      const currentOfflineSize =\n        totalAssetSize(downloadedAssets) + totalAssetSize(downloadingAssets);\n      const sessionSize = totalAssetSize(downloadableAssets);\n      const offlineProgress = offlineAccess\n        ? 100\n        : Math.round((currentOfflineSize / sessionSize) * 100);\n      const isDownloading =\n        offlineProgress &&\n        offlineProgress !== 100 &&\n        downloadingAssets.length > 0;\n      const isQueued = queuedAssets.length && !isDownloading;\n      const hasErrors = assetsInError.length > 0;\n      const assetsInErrorWithErrors = assetsInError.map(aie => ({\n        ...aie,\n        error: errors[aie.url]\n      }));\n\n      return {\n        id: `${i}`,\n        t: s.t,\n        assetReferences,\n        size: sessionSize,\n        offlineAccess,\n        offlineProgress,\n        isDownloading,\n        isQueued,\n        hasErrors,\n        assetsInError: assetsInErrorWithErrors\n      };\n    });\n  }\n);\n\nexport const selectSessionAssets = createSelector([selectSession], session => {\n  return session.assets;\n});\n\nexport function loadSessions() {\n  return async (dispatch, getState) => {\n    try {\n      const paths = getSessionPaths(getState());\n      dispatch(sessionsContentLoading());\n\n      // dynamically load about content\n      const aboutContent = await import(`Sessions/about.json`);\n      if (aboutContent) {\n        const { assets, sections, t } = aboutContent;\n        dispatch(aboutContentLoaded({ assets, sections, t }));\n      }\n\n      // dynamically load session content\n      const content = await Promise.all(\n        paths.map(p => import(`Sessions/${p}`))\n      );\n      // NOTE since we are importing, we get back ES6 modules\n      // but we can only persist JSON objects, so the following does so\n      // TODO find an alternative way to do this that doesn't\n      // require us to pick out fields from the session content.\n      dispatch(\n        sessionsContentLoaded(\n          content.map(c => {\n            const { t, assets, forms, sections } = c;\n            return { t, assets, forms, sections };\n          })\n        )\n      );\n    } catch (err) {\n      dispatch(sessionsContentFailedToLoad(err));\n    }\n  };\n}\n","/**\n * This helper functions computes the length of a section.\n * Since parts are optional, this contains the logic to handle\n * sections without parts as counting as a length of 1.\n */\nexport default function sectionLength(section) {\n  if (section.parts && section.parts.length) {\n    return section.parts.length;\n  } else {\n    return 1;\n  }\n}\n\n/**\n * Reduces an array of sections to their total length\n */\nexport function totalSectionLengths(sections) {\n  if (!sections) {\n    return 0;\n  }\n  return sections.reduce((acc, s) => sectionLength(s) + acc, 0);\n}\n\n/**\n * Returns an array of section lengths, ordered by their length ascending.\n * It is used when looking up the right section/part values\n * given an index into a flattened array of parts across all sections.\n */\nexport function listSectionsByAccumulatedLength(sections) {\n  const list = [];\n  if (sections) {\n    sections.reduce((acc, s, i) => {\n      list[i] = sectionLength(s) + acc;\n      return list[i];\n    }, 0);\n  }\n  return list;\n}\n\n/**\n * Returns the section and part corresponding to the index into a flattened\n * version of all sections/parts.\n */\nexport function getSectionAndPartFromIndex(sections, index) {\n  const list = listSectionsByAccumulatedLength(sections);\n  if (index < 0) {\n    index = 0;\n  }\n  const maxIndex = list[list.length - 1];\n  if (index >= maxIndex) {\n    index = maxIndex - 1;\n  }\n\n  let section = 0;\n  let priorLength = 0;\n  let part = 0;\n  for (let i = 0; i < list.length; i++) {\n    if (index < list[i]) {\n      section = i;\n      priorLength = i === 0 ? 0 : list[i - 1];\n      break;\n    }\n  }\n  part = index - priorLength;\n  return { section, part };\n}\n\n/**\n * Returns the index into a flattened version of all sections/parts\n * given a particular section and part.\n */\nexport function getIndexFromSectionAndPart(sections, section, part) {\n  const list = listSectionsByAccumulatedLength(sections);\n  const priorLength = section === 0 ? 0 : list[section - 1];\n  return priorLength + part;\n}\n\n/**\n * This standardizes getting content since some sections have no parts.\n * We treat a request for part 0 of a section with no parts as a request for\n * the section itself.\n */\nexport function getContentForSectionAndPart(sections, section, part) {\n  if (!sections || !sections.length) return null;\n\n  const s = sections[section];\n  if (s) {\n    if (s.parts) {\n      const { t, d, info, duration } = s; // make section info available to each part\n      return {\n        ...s.parts[part],\n        section: {\n          t,\n          d,\n          info,\n          duration,\n          sectionIndex: section\n        }\n      };\n    } else if (part === 0) {\n      return { ...s, sectionIndex: section, type: 'section' };\n    }\n  }\n  return null;\n}\n","import { createSlice, createSelector } from '@reduxjs/toolkit';\nimport {\n  getSectionAndPartFromIndex,\n  getIndexFromSectionAndPart,\n  getContentForSectionAndPart\n} from 'Utils/session/sectionLength';\n\nconst liveSlice = createSlice({\n  name: 'live',\n  initialState: {\n    sections: [],\n    section: 0,\n    part: 0\n  },\n  reducers: {\n    reset(state) {\n      state.sections = [];\n      state.section = 0;\n      state.part = 0;\n      return state;\n    },\n    sectionsLoaded(state, action) {\n      state.sections = action.payload;\n      state.section = 0;\n      state.part = 0;\n      return state;\n    },\n    changed(state, action) {\n      // This reducer is used when a user navigates\n      // to a particular section or part.\n      const { section, part } = action.payload;\n      const sections = state.sections;\n      if (isInBound(sections, section)) {\n        state.section = section;\n        const { parts } = sections[section];\n        if (!parts) {\n          // NOTE, some sections may have no parts.\n          // We treat that as a special case as part index 0.\n          state.part = 0;\n        } else if (isInBound(parts, part)) {\n          state.part = part;\n        }\n      }\n      return state;\n    },\n    slideIndexChanged(state, action) {\n      // This reducer is used when the user swipes through\n      // a live session since in such cases we just have index information.\n      const index = action.payload;\n      const { section, part } = getSectionAndPartFromIndex(\n        state.sections,\n        index\n      );\n      state.section = section;\n      state.part = part;\n      return state;\n    }\n  }\n});\n\nexport default liveSlice;\nexport const selectLive = state => {\n  return state.live;\n};\nexport const selectPartIndex = createSelector(selectLive, live => live.part);\n\nexport const selectCurrentPartContent = createSelector(selectLive, live => {\n  const { sections, section, part } = live;\n  return getContentForSectionAndPart(sections, section, part);\n});\nexport const selectCurrentSlideIndex = createSelector(selectLive, live => {\n  const { sections, section, part } = live;\n  if (!sections) return -1;\n  return getIndexFromSectionAndPart(sections, section, part);\n});\n\n// returns if the index is in the bounds of the array.\nfunction isInBound(arr, i) {\n  return arr && arr.length && i >= 0 && i < arr.length;\n}\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst groupsSlice = createSlice({\n  name: 'groups',\n  initialState: {\n    current: null,\n    list: []\n  },\n  reducers: {\n    groupsLoaded(state, action) {\n      state.list = action.payload;\n      state.current = null;\n      return state;\n    },\n    groupSelected(state, action) {\n      state.current = action.payload;\n      return state;\n    },\n    groupCreated(state, action) {\n      state.list.push(action.payload);\n      return state;\n    },\n    groupUpdated(state, action) {\n      const { groupIndex, group } = action.payload;\n      state.list.splice(groupIndex, 1, group);\n      return state;\n    },\n    groupDeleted(state, action) {\n      const { groupIndex } = action.payload;\n      state.list.splice(groupIndex, 1);\n      // TODO handle re-indexing of groups on deletion.\n      // and what happens to current?\n      return state;\n    }\n  }\n});\n\nexport const selectCurrentGroup = state => state.current;\nexport const selectGroupsList = state => state.list;\n\nexport default groupsSlice;\n","import { createSlice, createSelector } from '@reduxjs/toolkit';\n\n/**\n * User form input is stored in forms/data.\n * forms/meta contains meta information about forms.\n */\nconst formsSlice = createSlice({\n  name: 'forms',\n  initialState: {\n    data: {},\n    meta: {}\n  },\n  reducers: {\n    formDataUpdated(state, action) {\n      const { name, data } = action.payload;\n      const current = state.data || {};\n      current[name] = data;\n      state.data = current;\n      return state;\n    },\n    formDataDeleted(state, action) {\n      const { name } = action.payload;\n      delete state.data[name];\n      return state;\n    }\n  }\n});\n\nexport const { formDataUpdated, formDataDeleted } = formsSlice.actions;\n\nexport const selectForms = state => state.forms;\nexport const selectFormData = createSelector(selectForms, forms => forms.data);\nexport const selectFormsByName = createSelector(\n  selectFormData,\n  (_, names) => names,\n  (formData, names) => {\n    let result = {};\n    if (names) {\n      names.forEach(n => (result[n.name] = formData[n.name]));\n    }\n    return result;\n  }\n);\n\nexport default formsSlice;\n","import sessions from 'Sessions/index.json';\nconst cacheName = sessions.assetCacheName; // TODO what if it's not specified?\n\nexport async function getCache() {\n  return caches.open(cacheName);\n}\n\nexport async function deleteCache() {\n  return caches.delete(cacheName);\n}\n\nexport async function putInCache(request, response) {\n  const cache = await getCache();\n  return await cache.put(request, response);\n}\n\nexport async function addToCache(url) {\n  const cache = await getCache();\n  return await cache.add(url);\n}\n\nexport async function deleteFromCache(url) {\n  const cache = await getCache();\n  return await cache.delete(url);\n}\n\nexport async function isCached(url) {\n  const cache = await getCache();\n  return await cache.match(url);\n}\n\n/**\n *\n * @param {boolean} urlsOnly whether or not to check for a url\n *                              or for the actual cached response.\n * @param {string} ext an optional extension to check for so you\n *                        get only files of certain types.\n *                        Include the leading period (e.g. \".mp4\")\n */\nexport async function listCachedAssets(urlsOnly, ext) {\n  // NOTE it might be better to store an index in indexeddb\n  // Get a list of all of the caches for this origin\n  const cacheNames = await caches.keys();\n  const result = [];\n\n  for (const name of cacheNames) {\n    // Open the cache\n    const cache = await caches.open(name);\n\n    // Get a list of entries. Each item is a Request object\n    for (const request of await cache.keys()) {\n      // If the request URL matches, add the response to the result\n      if (!ext || request.url.endsWith(ext)) {\n        if (urlsOnly) {\n          result.push(request.url);\n        } else {\n          result.push(await cache.match(request));\n        }\n      }\n    }\n  }\n\n  return result;\n}\n","import {\n  configureStore,\n  combineReducers,\n  getDefaultMiddleware,\n  createAction\n} from '@reduxjs/toolkit';\nimport counterSlice from './counter';\nimport languageSlice from './language';\nimport lifecycleSlice from './lifecycle';\nimport sessionsSlice from './sessions';\nimport downloadsSlice from './downloads';\nimport liveSlice from './live';\nimport groupsSlice from './groups';\nimport formsSlice from './forms';\nimport { deleteCache } from './downloads/cache';\n\n/* Setup required to enable offline redux */\nimport storage from 'redux-persist/lib/storage';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { createOffline } from '@redux-offline/redux-offline';\nimport offlineConfig from '@redux-offline/redux-offline/lib/defaults';\n\nconst persistConfig = {\n  key: 'root',\n  storage\n};\n\nconst {\n  middleware: offlineMiddleware,\n  enhanceReducer: offlineEnhanceReducer,\n  enhanceStore: offlineEnhanceStore\n} = createOffline({\n  ...offlineConfig,\n  persist: false\n});\n\nconst reducers = combineReducers({\n  counter: counterSlice.reducer,\n  language: languageSlice.reducer,\n  lifecycle: lifecycleSlice.reducer,\n  sessions: sessionsSlice.reducer,\n  downloads: downloadsSlice.reducer,\n  live: liveSlice.reducer,\n  groups: groupsSlice.reducer,\n  forms: formsSlice.reducer\n});\n\nexport const reset = createAction('RESET');\nconst rootReducer = (state, action) => {\n  if (action.type === 'RESET') {\n    state = undefined;\n    deleteCache();\n  }\n  return reducers(state, action);\n};\n\nconst persistedReducer = persistReducer(\n  persistConfig,\n  offlineEnhanceReducer(rootReducer)\n);\n\n/* Now configure the store */\n\nconst store = configureStore({\n  reducer: persistedReducer,\n  middleware: [\n    ...getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: ['persist/PERSIST']\n      }\n    }),\n    offlineMiddleware\n  ],\n  enhancers: [offlineEnhanceStore]\n});\n\nexport const persistor = persistStore(store);\nexport default store;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport Backend from 'i18next-xhr-backend';\n\nimport language from 'Redux/language';\nimport store from 'Redux/store';\n\n// Following this guide: https://react.i18next.com/latest/using-with-hooks\n\ni18n\n  .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    fallbackLng: 'en',\n    debug: process.env.NODE_ENV !== 'production',\n    interpolation: {\n      escapeValue: false // not needed for react as it escapes by default\n    },\n    backend: {\n      loadPath: (process.env.PUBLIC_URL || '') + '/locales/{{lng}}/{{ns}}.json'\n    },\n    keySeparator: '|',\n    nsSeparator: '}',\n    // don't try to load en-US locale, just en for example.\n    // see: https://github.com/i18next/i18next/issues/964\n    load: 'languageOnly'\n  })\n  .then(syncI18nAndReduxLanguage);\n\ni18n.loadNamespaces('zume');\ni18n.loadNamespaces('zume-assets');\n\nexport default i18n;\n\nexport function syncI18nAndReduxLanguage() {\n  const { changeLanguage } = language.actions;\n  store.dispatch(changeLanguage({ code: i18n.language }));\n}\n","import { Workbox } from 'workbox-window';\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\n// When the user has an old page open and opens a new one, the new one will\n// see that there is a new service worker available, but cannot immediately activate it.\n// This function adds lifecycle event handlers so that when the user chooses to activate\n// the updated service worker, the page will auto-refresh and get the update.\nfunction handleNewServiceWorker(wb, config) {\n  wb.addEventListener('waiting', event => {\n    // we check for updates via this mechanism because it covers\n    // cases that onupdatefound does not.\n    if (config && config.onUpdate) {\n      config.onUpdate();\n    }\n    wb.addEventListener('controlling', event => {\n      window.location.reload();\n    });\n  });\n}\n\n// When the user has an old page open and opens a new one, but visits the old page\n// the old page needs to warn the user. They can either close that tab (simplest).\n// Or we can allow them to activate the updated external service worker and refesh.\n// This function adds event handlers to do the latter.\nfunction handleNewExternalServiceWorker(wb, config) {\n  wb.addEventListener('externalwaiting', event => {\n    if (config && config.onExternalUpdate) {\n      config.onExternalUpdate(event.sw);\n    }\n  });\n\n  wb.addEventListener('externalactivated', event => {\n    window.location.reload();\n  });\n}\n\nfunction registerValidSW(swUrl, config) {\n  const wb = new Workbox(swUrl);\n\n  handleNewServiceWorker(wb, config);\n  handleNewExternalServiceWorker(wb, config);\n\n  wb.register()\n    .then(registration => {\n      if (config && config.setWorkbox) {\n        config.setWorkbox(wb);\n      }\n\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport currentPathAndPrefix from 'Utils/browser/currentPathAndPrefix';\nimport { useNavigation, useCurrentRoute } from 'react-navi';\n\nexport default function RoutedBottomNavigation({ actions, className }) {\n  let navigation = useNavigation() || {};\n  let { prefix, currentPath } = currentPathAndPrefix(\n    navigation,\n    useCurrentRoute()\n  );\n\n  let i = actions.findIndex(({ path }) => {\n    if (path === '/' && prefix) {\n      // NOTE 7/27/2019 Since the trailingSlash=\"add\" option in Router is not working\n      // we detect if we are at the root and have a different prefix and\n      // compare the prefix with the current path. Otherwise on refresh, the root path wouldn't\n      // be selected by this widget because it would compare /zume-pwa with /zume-pwa/\n      return prefix === currentPath;\n    }\n    return prefix + path === currentPath;\n  });\n\n  const [value, setValue] = React.useState(i);\n\n  return (\n    <BottomNavigation\n      value={value}\n      onChange={(event, newValue) => {\n        setValue(newValue);\n        navigation.navigate(prefix + actions[newValue].path);\n      }}\n      showLabels\n      className={className}>\n      {actions.map(a => {\n        return (\n          <BottomNavigationAction key={a.label} label={a.label} icon={a.icon} />\n        );\n      })}\n    </BottomNavigation>\n  );\n}\n","/**\n * These functions are helpers that can extract the\n * current path as well as the basename prefix if it applies.\n * It is used by the Navigation UI to mark which view is active\n */\n\nexport default function currentPathAndPrefix(navigation, currentRoute) {\n  let basename = navigation.basename || '/';\n  let prefix = basename !== '/' ? basename : '';\n  let currentPath = getCurrentPath(currentRoute);\n  return { prefix, currentPath };\n}\n\nexport function getCurrentPath(route) {\n  let currentPath = null;\n  if (!route) {\n    currentPath = '/';\n  } else {\n    currentPath = route.url.pathname;\n  }\n  return currentPath;\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport HomeIcon from '@material-ui/icons/Home';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport RoutedBottomNavigation from '../shared/navigation/RoutedBottomNavigation';\nimport { useTranslation } from 'react-i18next';\n\nconst classes = makeStyles({\n  stickToBottom: {\n    width: '100%',\n    position: 'fixed',\n    bottom: 0,\n    borderTop: '1px solid rgba(0, 0, 0, 0.12)'\n  }\n});\n\nexport default function ZumeAppNavigation() {\n  const { t } = useTranslation();\n  const defaultActions = [\n    {\n      label: t('navigation|account'),\n      icon: <AccountCircleOutlinedIcon />,\n      path: '/menu'\n    },\n    {\n      label: t('navigation|home'),\n      icon: <HomeIcon />,\n      path: '/'\n    },\n    {\n      label: t('navigation|about'),\n      icon: <InfoOutlinedIcon />,\n      path: '/about'\n    }\n  ];\n\n  return (\n    <RoutedBottomNavigation\n      actions={defaultActions}\n      className={classes().stickToBottom}\n    />\n  );\n}\n","import React from 'react';\nimport ZumeAppNavigation from './ZumeAppNavigation';\nimport { NotFoundBoundary } from 'react-navi';\n\nfunction renderNotFound() {\n  return (\n    <div className=\"Layout-error\">\n      <h1>404 - Not Found</h1>\n    </div>\n  );\n}\n\nfunction ZumeViewWithNav({ children }) {\n  return (\n    <div>\n      <NotFoundBoundary render={renderNotFound}>{children}</NotFoundBoundary>\n      <ZumeAppNavigation />\n    </div>\n  );\n}\n\nexport default ZumeViewWithNav;\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nexport default function BannerWithAvatar({ message, buttons = [], avatar }) {\n  return (\n    <Box clone pt={2} pr={1} pb={1} pl={2} m={1}>\n      <Paper elevation={0}>\n        <Grid container spacing={2} alignItems=\"center\" wrap=\"nowrap\">\n          <Grid item>\n            <Box>{avatar}</Box>\n          </Grid>\n          <Grid item>\n            <Typography>{message}</Typography>\n          </Grid>\n        </Grid>\n        <Grid container justify=\"flex-end\" spacing={1}>\n          {buttons.map((b, i) => (\n            <Grid item key={i}>\n              {b}\n            </Grid>\n          ))}\n        </Grid>\n      </Paper>\n    </Box>\n  );\n}\n","// Unfortunately iOS and Safari are sufficiently popular and unique to warrant\n// specialized code or instructions to users for things like\n// installing the app to their device. That is why this exists.\n\nexport function isSafariIOS() {\n  return isSafariOnly() && /iPad|iPhone|iPod/.test(navigator.userAgent);\n}\n\nexport function isSafariOnly() {\n  const isSafari = navigator.userAgent.indexOf('Safari') > -1;\n  const isChrome = navigator.userAgent.indexOf('Chrome') > -1;\n  return isSafari && !isChrome;\n}\n\nexport function isSamsung() {\n  return navigator.userAgent.indexOf('SamsungBrowser') > -1;\n}\n","import React from 'react';\nimport { SvgIcon } from '@material-ui/core';\n\nexport default function IOSShareIcon(props) {\n  return (\n    <SvgIcon {...props} viewBox=\"0 0 100 140\">\n      <g>\n        <title>Layer 1</title>\n        <line\n          stroke=\"#147aff\"\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_2\"\n          y2=\"130.223208\"\n          x2=\"5.333331\"\n          y1=\"34.889872\"\n          x1=\"5.749998\"\n          stroke-width=\"6\"\n          fill=\"none\"\n        />\n        <line\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_3\"\n          y2=\"129.889872\"\n          x2=\"95.000002\"\n          y1=\"34.889872\"\n          x1=\"94.750002\"\n          stroke-width=\"6\"\n          stroke=\"#147aff\"\n          fill=\"none\"\n        />\n        <line\n          transform=\"rotate(90 50.20833206176757,127.44494628906251) \"\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_4\"\n          y2=\"175.000002\"\n          x2=\"50.333333\"\n          y1=\"79.889874\"\n          x1=\"50.083333\"\n          stroke-width=\"6\"\n          stroke=\"#147aff\"\n          fill=\"none\"\n        />\n        <line\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_9\"\n          y2=\"34.889872\"\n          x2=\"33.766125\"\n          y1=\"34.889872\"\n          x1=\"2.75\"\n          fill-opacity=\"null\"\n          stroke-width=\"6\"\n          stroke=\"#147aff\"\n          fill=\"none\"\n        />\n        <line\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_10\"\n          y2=\"34.889872\"\n          x2=\"97.766125\"\n          y1=\"34.889872\"\n          x1=\"66.75\"\n          fill-opacity=\"null\"\n          stroke-width=\"6\"\n          stroke=\"#147aff\"\n          fill=\"none\"\n        />\n        <line\n          stroke=\"#147aff\"\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_11\"\n          y2=\"10.19463\"\n          x2=\"50.75\"\n          y1=\"88.223195\"\n          x1=\"50.75\"\n          fill-opacity=\"null\"\n          stroke-width=\"6\"\n          fill=\"none\"\n        />\n        <line\n          stroke=\"#147aff\"\n          transform=\"rotate(-24.640222549438477 45.75,11.889869689941404) \"\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_12\"\n          y2=\"7.680333\"\n          x2=\"54.983494\"\n          y1=\"16.099407\"\n          x1=\"36.516505\"\n          fill-opacity=\"null\"\n          stroke-width=\"6\"\n          fill=\"none\"\n        />\n        <line\n          transform=\"rotate(-109.3953857421875 55.75,11.389868736267097) \"\n          stroke-linecap=\"undefined\"\n          stroke-linejoin=\"undefined\"\n          id=\"svg_13\"\n          y2=\"6.889869\"\n          x2=\"64.750002\"\n          y1=\"15.889869\"\n          x1=\"46.750002\"\n          stroke-width=\"6\"\n          stroke=\"#147aff\"\n          fill=\"none\"\n        />\n      </g>\n    </SvgIcon>\n  );\n}\n","import React from 'react';\nimport BannerWithAvatar from '../BannerWithAvatar';\nimport Avatar from '@material-ui/core/Avatar';\n\nimport { useTranslation } from 'react-i18next';\nimport { isSafariIOS } from 'Utils/browser/userAgent';\nimport AddToHomeScreenOutlined from '@material-ui/icons/AddToHomeScreenOutlined';\nimport SystemUpdateOutlined from '@material-ui/icons/SystemUpdateOutlined';\nimport IOSShareIcon from 'Components/shared/IOSShareIcon';\n\nexport default function InstallOrUpdateBanner({\n  hidden,\n  showUpdateMessage,\n  avatarClassName,\n  button,\n  ...props\n}) {\n  const { t } = useTranslation();\n  let icon = null;\n  let message = '';\n  if (showUpdateMessage) {\n    icon = <SystemUpdateOutlined />;\n    message = t('install|update_explanation');\n  } else {\n    if (isSafariIOS()) {\n      icon = <IOSShareIcon />;\n      message = t('install|ios_install_explanation');\n      avatarClassName = '';\n    } else {\n      icon = <AddToHomeScreenOutlined />;\n      message = t('install|install_explanation');\n    }\n  }\n\n  const avatar = <Avatar className={avatarClassName}>{icon}</Avatar>;\n  return hidden ? null : (\n    <BannerWithAvatar message={message} avatar={avatar} buttons={[button]} />\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport AddToHomeScreenOutlined from '@material-ui/icons/AddToHomeScreenOutlined';\nimport SystemUpdateOutlined from '@material-ui/icons/SystemUpdateOutlined';\nimport { useTranslation } from 'react-i18next';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { isSafariIOS } from 'Utils/browser/userAgent';\nimport clsx from 'clsx';\n\nconst classes = makeStyles(theme => ({\n  show: {\n    display: 'inline-flex'\n  },\n  hide: {\n    display: 'none'\n  }\n}));\n\nconst iOSaddToHomeInstructionsUrl =\n  'https://support.apple.com/guide/shortcuts/run-shortcuts-from-the-ios-home-screen-apd735880972/ios';\n\nexport default function InstallOrUpdateButton({\n  hidden,\n  showUpdateMessage,\n  ...props\n}) {\n  const { t } = useTranslation();\n  let icon = null;\n  let text = '';\n  let label = '';\n  let onClick = props.onClick;\n  if (showUpdateMessage) {\n    icon = <SystemUpdateOutlined />;\n    text = t('install|update');\n    label = t('install|update_explanation');\n  } else {\n    icon = <AddToHomeScreenOutlined />;\n    if (isSafariIOS()) {\n      text = t('install|ios_learn_more');\n      label = t('install|ios_install_explanation');\n      onClick = e => {\n        window.open(iOSaddToHomeInstructionsUrl);\n      };\n    } else {\n      text = t('install|install');\n      label = t('install|install_explanation');\n    }\n  }\n\n  const displayStyle = hidden ? classes().hide : classes().display;\n\n  return (\n    <Button\n      variant=\"outlined\"\n      size=\"small\"\n      color=\"primary\"\n      className={clsx(props.className, displayStyle)}\n      aria-label={label}\n      title={label}\n      onClick={onClick}>\n      {icon}\n      &nbsp; {text}\n    </Button>\n  );\n}\n","import React from 'react';\nimport lifecycleSlice, { selectLifecycle } from 'Redux/lifecycle';\nimport { useDispatch, useSelector } from 'react-redux';\nimport InstallOrUpdateButton from '../shared/lifecycle/InstallOrUpdateButton';\n\nexport default function ZumeInstallButton({ forceShow }) {\n  const { appUpdated, appInstalling } = lifecycleSlice.actions;\n  const dispatch = useDispatch();\n  const {\n    installable,\n    updateAvailable,\n    deferredPrompt,\n    workbox,\n    externalServiceWorker\n  } = useSelector(selectLifecycle);\n  const hidden = !installable && !updateAvailable && !forceShow;\n  // TODO decide on our logic for which is more important, \"install\" or \"update\"?\n  // Because the \"update\" message may be important for users even in the browser, not\n  // just standalone, so they know to \"skipWaiting\" and \"claimClients\" and/or\n  // close and reopen all app windows to get the latest version.\n  // For now, we are preferencing showing the update message over the install message.\n  // We also let the user override via prop.\n  let showUpdateMessage = updateAvailable;\n\n  const onClickInstall = async () => {\n    deferredPrompt.prompt();\n    // Wait for the user to respond to the prompt\n    const userChoice = await deferredPrompt.userChoice;\n    if (userChoice.outcome === 'accepted') {\n      // TODO analytics to track when user installs\n      dispatch(appInstalling());\n    }\n  };\n\n  const onClickUpdate = () => {\n    // See detailed logic handling different cases as outlined in\n    // https://developers.google.com/web/tools/workbox/modules/workbox-window\n    // We need to test updating both cases when an old and new service worker window are open:\n    // 1) update from an old window\n    // 2) update from a new window\n    if (externalServiceWorker) {\n      externalServiceWorker.postMessage({ type: 'SKIP_WAITING' });\n    } else {\n      workbox.messageSW({ type: 'SKIP_WAITING' });\n    }\n    dispatch(appUpdated());\n  };\n\n  return (\n    <InstallOrUpdateButton\n      hidden={hidden}\n      showUpdateMessage={showUpdateMessage}\n      onClick={e => (showUpdateMessage ? onClickUpdate() : onClickInstall())}\n    />\n  );\n}\n","import React from 'react';\nimport { selectLifecycle } from 'Redux/lifecycle';\nimport { useSelector } from 'react-redux';\nimport InstallOrUpdateBanner from '../shared/lifecycle/InstallOrUpdateBanner';\nimport ZumeInstallButton from './ZumeInstallButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { isSafariIOS } from 'Utils/browser/userAgent';\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    color: theme.palette.primary.contrastText,\n    backgroundColor: theme.palette.primary.main\n  }\n}));\n\nexport default function ZumeInstallBanner() {\n  const classes = useStyles();\n  const { installable, updateAvailable, firstVisit } = useSelector(\n    selectLifecycle\n  );\n\n  const iOSFirstVisit = firstVisit && isSafariIOS();\n  let hidden = !installable && !updateAvailable && !iOSFirstVisit;\n  let showUpdateMessage = updateAvailable;\n\n  return (\n    <InstallOrUpdateBanner\n      hidden={hidden}\n      showUpdateMessage={showUpdateMessage}\n      avatarClassName={classes.avatar}\n      button={<ZumeInstallButton />}\n    />\n  );\n}\n","import React from 'react';\nimport { useNavigation } from 'react-navi';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst filename = '/zume-logo-white.png';\nconst favicon = '/favicon.png';\n\n// TODO pull these from material-ui's button size styles\nconst useStyles = makeStyles(theme => ({\n  favicon: {\n    height: '32px'\n  },\n  small: {\n    height: '30px'\n  },\n  medium: {\n    height: '36px'\n  },\n  large: {\n    height: '42px'\n  }\n}));\n\nexport default function ZumeLogo(props) {\n  const classes = useStyles();\n  const navigation = useNavigation();\n  let src = '';\n  if (props.size === 'favicon') {\n    src = favicon;\n  } else {\n    src = filename;\n  }\n  if (navigation && navigation.basename) {\n    src = `${navigation.basename}${src}`;\n  }\n  return (\n    <img\n      src={src}\n      alt=\"Zume logo\"\n      className={classes[props.size || 'medium']}\n    />\n  );\n}\n","import { useNavigation } from 'react-navi';\n\n/**\n * This hook is a helper that ensures we qualify relative links with the basename where the app is loaded.\n * It helps when we are hosted at a subdirectory instead of root.\n */\nexport default function useBasenameUrl(url) {\n  const navigation = useNavigation();\n  return navigation && navigation.basename\n    ? `${navigation.basename}${url}`\n    : url;\n}\n","import React, { useEffect } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport Box from '@material-ui/core/Box';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport clsx from 'clsx';\nimport { useNavigation } from 'react-navi';\nimport useBasenameUrl from 'Utils/browser/useBasenameUrl';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\nimport Zoom from '@material-ui/core/Zoom';\n\n// https://material-ui.com/components/grid-list/\nconst useStyles = makeStyles((theme) => ({\n  gridList: {\n    flexWrap: 'nowrap',\n    // Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\n    transform: 'translateZ(0)',\n  },\n  gridListWrapped: {\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n  },\n  tile: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    [theme.breakpoints.down('sm')]: {\n      width: '6rem',\n      height: '6rem',\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '8rem',\n      height: '8rem',\n    },\n    [theme.breakpoints.up('lg')]: {\n      width: '11rem',\n      height: '11rem',\n    },\n    margin: '5px',\n  },\n  unselectedTile: {\n    backgroundColor: theme.palette.primary.light,\n  },\n}));\n\nexport default function SessionGridList({\n  sessions,\n  selectedId,\n  variant,\n  animate,\n}) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const mdMatch = useMediaQuery(theme.breakpoints.up('md'));\n  const tileRef = React.createRef();\n  useEffect(() => {\n    if (tileRef.current) {\n      tileRef.current.scrollIntoView();\n    }\n  }, [tileRef, sessions, selectedId]);\n\n  if (!sessions || !sessions.length) {\n    return <div className={classes.root}>No sessions available</div>;\n  }\n  const cols = mdMatch ? 4.25 : 4;\n  const wrapped = variant === 'wrapped';\n\n  const transitionDuration = {\n    enter: theme.transitions.duration.enteringScreen,\n    exit: theme.transitions.duration.leavingScreen,\n  };\n\n  const gridList = (\n    <GridList\n      className={wrapped ? classes.gridListWrapped : classes.gridList}\n      cellHeight=\"auto\"\n      cols={cols}>\n      {sessions.map((s) => {\n        let tileClass = classes.tile;\n        if (s.id !== selectedId) {\n          tileClass = clsx(classes.tile, classes.unselectedTile);\n        }\n        if (!selectedId || s.id !== selectedId) {\n          return <SessionGridListItem key={s.id} s={s} className={tileClass} />;\n        } else {\n          return (\n            <SessionGridListItem\n              key={s.id}\n              s={s}\n              className={tileClass}\n              ref={tileRef}\n            />\n          );\n        }\n      })}\n    </GridList>\n  );\n  if (animate) {\n    return (\n      <Zoom\n        in={true}\n        timeout={transitionDuration}\n        style={{\n          transitionDelay: `${transitionDuration.exit}ms`,\n        }}\n        unmountOnExit>\n        {gridList}\n      </Zoom>\n    );\n  } else {\n    return gridList;\n  }\n}\n\nconst SessionGridListItem = React.forwardRef(({ key, s, className }, ref) => {\n  const href = useBasenameUrl(`/session/${s.id}`);\n  const t = useAppTranslation();\n  const navigation = useNavigation();\n  return (\n    <GridListTile key={key}>\n      <Box\n        ref={ref}\n        onClick={() => {\n          navigation.navigate(href);\n        }}\n        boxShadow={1}\n        textAlign=\"center\"\n        className={className}\n        style={{\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}>\n        {t(s.title)}\n      </Box>\n    </GridListTile>\n  );\n});\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport ZumeInstallBanner from 'Components/zume/ZumeInstallBanner';\nimport ZumeLogo from 'Components/zume/ZumeLogo';\nimport { useSelector } from 'react-redux';\nimport SessionGridList from 'Components/shared/session/SessionGridList';\nimport { getSessionTitles } from 'Redux/sessions';\n\nfunction App() {\n  const titles = useSelector(getSessionTitles);\n\n  return (\n    <Container bgcolor=\"white\" component=\"main\" maxWidth=\"md\">\n      <Box pb={10}>\n        <ZumeInstallBanner />\n        <br />\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <Box\n              bgcolor=\"white\"\n              display=\"flex\"\n              m={1}\n              p={1}\n              justifyContent=\"center\">\n              <ZumeLogo size=\"large\" />\n            </Box>\n          </header>\n          <br />\n          <SessionGridList sessions={titles} variant=\"wrapped\" animate={true} />\n          <br />\n        </div>\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ListItem from '@material-ui/core/ListItem';\nimport { Link } from 'react-navi';\nimport useBasenameUrl from 'Utils/browser/useBasenameUrl';\n\nexport default function ListItemLink(props) {\n  return (\n    <ListItem\n      button\n      component={Link}\n      {...props}\n      href={useBasenameUrl(props.href)}\n    />\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ZumeInstallButton from 'Components/zume/ZumeInstallButton';\nimport ZumeLogo from 'Components/zume/ZumeLogo';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemLink from 'Components/shared/navigation/ListItemLink';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Divider from '@material-ui/core/Divider';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownloadOutlined';\nimport TranslateIcon from '@material-ui/icons/TranslateOutlined';\nimport InfoIcon from '@material-ui/icons/InfoOutlined';\nimport HelpIcon from '@material-ui/icons/HelpOutline';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport ExitToAppIcon from '@material-ui/icons/ExitToAppOutlined';\nimport BookIcon from '@material-ui/icons/BookOutlined';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\nimport { RESET_STATE } from '@redux-offline/redux-offline/lib/constants';\nimport { reset } from 'Redux/store';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    maxWidth: '100%',\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nexport default function Menu() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  const [resetting, setResetting] = useState(false);\n\n  return (\n    <div className={classes.root}>\n      <Box display=\"flex\" p={1}>\n        <Box flexGrow={1}>\n          <ZumeLogo size=\"small\" />\n        </Box>\n        <Box>\n          <ZumeInstallButton />\n        </Box>\n      </Box>\n      <List\n        subheader={<ListSubheader>{t('menu|settings')}</ListSubheader>}\n        component=\"nav\"\n        aria-label={t('menu|settings')}>\n        <ListItemLink href=\"/downloads\">\n          <ListItemIcon>\n            <CloudDownloadIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('menu|downloads')} />\n        </ListItemLink>\n        <ListItemLink href=\"/language\">\n          <ListItemIcon>\n            <TranslateIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('menu|language')} />\n        </ListItemLink>\n        <ListItem\n          button\n          onClick={() => {\n            const shouldReset = window.confirm(t(t('menu|reset_app_warning')));\n            if (shouldReset) {\n              setResetting(true);\n              dispatch(reset());\n              dispatch({ type: RESET_STATE });\n              setTimeout(() => {\n                setResetting(false);\n                window.location.reload();\n              }, 500);\n            }\n          }}>\n          <ListItemIcon>\n            <DeleteForeverIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('menu|reset_app')} />\n          {resetting && (\n            <ListItemSecondaryAction>\n              <CircularProgress />\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </List>\n      <List\n        subheader={<ListSubheader>{trans('About Zme Project')}</ListSubheader>}\n        component=\"nav\"\n        aria-label={trans('About Zme Project')}>\n        <ListItemLink href=\"/about\">\n          <ListItemIcon>\n            <InfoIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('navigation|about')} />\n        </ListItemLink>\n        <ListItemLink href=\"https://zume.training/\" target=\"_blank\">\n          <ListItemIcon>\n            <HelpIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('menu|help')} />\n        </ListItemLink>\n        <ListItemLink href={asset('guidebook')} target=\"_blank\">\n          <ListItemIcon>\n            <BookIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('menu|guidebook')} />\n        </ListItemLink>\n      </List>\n      <Divider />\n      <List component=\"nav\" aria-label=\"secondary mailbox folders\">\n        <ListItem button>\n          <ListItemIcon>\n            <ExitToAppIcon />\n          </ListItemIcon>\n          <ListItemText primary={t('menu|signout')} />\n        </ListItem>\n      </List>\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nconst classes = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    maxWidth: '100%',\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nexport default function LanguageSelector({\n  selected,\n  title,\n  onChange = () => {},\n  languages = [\n    {\n      enDisplayName: 'English',\n      code: 'en',\n      nativeName: 'English'\n    }\n  ],\n  className\n}) {\n  if (!className) {\n    className = classes().root;\n  }\n\n  return (\n    <div className={className}>\n      <List\n        subheader={<ListSubheader>{title}</ListSubheader>}\n        aria-label={title}\n      >\n        {languages.map(l => (\n          <ListItem\n            button\n            key={l.code}\n            selected={l.code === selected}\n            onClick={e => onChange(l.code, e)}\n          >\n            <ListItemText primary={l.nativeName} secondary={l.enDisplayName} />\n          </ListItem>\n        ))}\n      </List>\n    </div>\n  );\n}\n","import React from 'react';\nimport LanguageSelector from 'Components/shared/LanguageSelector';\nimport languages from 'I18n/languages.json';\nimport { useTranslation } from 'react-i18next';\n\nexport default function LanguageSettings() {\n  const { t, i18n } = useTranslation();\n  return (\n    <LanguageSelector\n      selected={i18n.language}\n      languages={languages}\n      title={t('language|select_header')}\n      onChange={lng => {\n        i18n.changeLanguage(lng);\n      }}\n    />\n  );\n}\n","/**\n * This helper function accepts a Codex part and\n * returns a title and preview text.\n */\n\nexport default function partPreview(part) {\n  let { type, t, d, info } = part;\n\n  if (!t && type) {\n    t = type.toUpperCase();\n  }\n\n  if (d) {\n    d = processRecursively(d);\n  } else {\n    d = processRecursively(info);\n  }\n\n  return { t, d };\n}\n\nfunction processRecursively(d) {\n  if (!d) {\n    return null;\n  }\n\n  if (typeof d === 'string') {\n    return d;\n  }\n\n  if (Array.isArray(d)) {\n    return processRecursively(d[0]);\n  }\n\n  return processRecursively(d.t);\n}\n","import React, { useState } from 'react';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport partPreview from 'Utils/session/partPreview';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\n\nconst useStyles = makeStyles(theme => ({\n  list: {\n    width: '100%'\n  }\n}));\n\nexport default function SessionSectionList({ sections }) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState(false);\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n  const trans = useAppTranslation();\n\n  if (!sections) {\n    return <div>Session has no sections</div>;\n  }\n\n  return (\n    <div>\n      {sections.map((s, i) => {\n        const parts = s.parts || [];\n        return (\n          <ExpansionPanel\n            key={i}\n            expanded={expanded === `panel${i}`}\n            onChange={handleChange(`panel${i}`)}>\n            <ExpansionPanelSummary\n              expandIcon={<ExpandMoreIcon />}\n              aria-controls={`panel${i}-content`}\n              id={`panel${i}-header`}>\n              <div>\n                {trans(s.t)}\n                <Typography\n                  component=\"p\"\n                  style={{ marginTop: '0.3rem' }}\n                  variant=\"caption\"\n                  color=\"textSecondary\">\n                  {trans(s.d) || s.d}\n                </Typography>\n              </div>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n              <List className={classes.list}>\n                {parts.map((p, i) => {\n                  let { t, d } = partPreview(p);\n                  return (\n                    <React.Fragment key={i}>\n                      <Divider component=\"li\" />\n                      <ListItem>\n                        <ListItemText\n                          primary={trans(t)}\n                          secondary={trans(d)}\n                          secondaryTypographyProps={{ noWrap: true }}\n                        />\n                      </ListItem>\n                    </React.Fragment>\n                  );\n                })}\n              </List>\n            </ExpansionPanelDetails>\n          </ExpansionPanel>\n        );\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport Fab from '@material-ui/core/Fab';\nimport Zoom from '@material-ui/core/Zoom';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    position: 'fixed',\n    bottom: theme.spacing(8),\n    left: '50%'\n  },\n  fab: {\n    margin: theme.spacing(1),\n    color: theme.palette.common.white,\n    backgroundColor: theme.palette.primary.main,\n    position: 'relative',\n    left: '-50%'\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\nexport default function ZoomInFAB(props) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const transitionDuration = {\n    enter: theme.transitions.duration.enteringScreen,\n    exit: theme.transitions.duration.leavingScreen\n  };\n  const Icon = props.icon;\n  const onClick = props.onClick;\n  const label = props.label;\n\n  return (\n    <Zoom\n      in={true}\n      timeout={transitionDuration}\n      style={{\n        transitionDelay: `${transitionDuration.exit}ms`\n      }}\n      unmountOnExit\n    >\n      <div className={classes.wrapper}>\n        <Fab\n          variant=\"extended\"\n          aria-label={label}\n          className={classes.fab}\n          onClick={onClick}\n        >\n          {Icon ? <Icon className={classes.extendedIcon} /> : null}\n          {props.children}\n        </Fab>\n      </div>\n    </Zoom>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport SessionSectionList from 'Components/shared/session/SessionSectionList';\nimport ZoomInFAB from 'Components/shared/ZoomInFAB';\nimport { selectSession, getSessionTitles } from 'Redux/sessions';\nimport { useSelector } from 'react-redux';\nimport { useNavigation } from 'react-navi';\nimport { useTranslation } from 'react-i18next';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\nimport useBasenameUrl from 'Utils/browser/useBasenameUrl';\n\nexport default function Sessions({ selectedId }) {\n  const session = useSelector(state => selectSession(state, selectedId));\n  const titles = useSelector(getSessionTitles);\n  const { title } = titles[selectedId];\n  const navigation = useNavigation();\n  const href = useBasenameUrl(`/live/${selectedId}`);\n  const { t } = useTranslation();\n  const trans = useAppTranslation();\n\n  console.log(titles[selectedId]);\n  return (\n    <Container component=\"main\" maxWidth=\"lg\" style={{ padding: 0 }}>\n      <Box>\n        <Box p={2}>\n          <Typography component=\"h2\" variant=\"h2\">\n            {trans(title)}\n          </Typography>\n        </Box>\n        {session ? (\n          <SessionSectionList\n            key={`sectionsFor${selectedId}`}\n            sections={session.sections}\n          />\n        ) : null}\n      </Box>\n      <ZoomInFAB onClick={() => navigation.navigate(href)}>\n        {t('sessions|start_session')}\n      </ZoomInFAB>\n    </Container>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { useTranslation } from 'react-i18next';\nimport IconButton from '@material-ui/core/IconButton';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport ShareIcon from '@material-ui/icons/Share';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport SwipeableViews from 'react-swipeable-views';\nimport { virtualize, bindKeyboard } from 'react-swipeable-views-utils';\n\nconst useStyles = makeStyles(theme => ({\n  main: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    height: '100vh',\n    width: '100vw',\n    padding: 0,\n    margin: 0\n  },\n  grow: {\n    flexGrow: 1\n  },\n  button: {\n    color: theme.palette.primary.contrastText\n  },\n  bottomBar: {\n    top: 'auto',\n    bottom: 0\n  }\n}));\n\n// NOTE order matters, virtualize must come first.\n// https://react-swipeable-views.com/getting-started/usage/#example-with-virtualize\nconst EnhancedSwipeableViews = bindKeyboard(virtualize(SwipeableViews));\n\nexport default function LiveSessionWrapper({\n  slideRenderer,\n  slideCount,\n  index,\n  onChangeIndex,\n  centerNavElement,\n  onExit\n}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  return (\n    <Container className={classes.main} maxWidth={false}>\n      <AppBar position=\"static\" elevation={0}>\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" aria-label={t('live|share')}>\n            <ShareIcon />\n          </IconButton>\n          <div className={classes.grow}>{centerNavElement}</div>\n          <IconButton\n            edge=\"end\"\n            color=\"inherit\"\n            aria-label={t('live|exit')}\n            onClick={onExit}>\n            <FullscreenExitIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <EnhancedSwipeableViews\n        index={index}\n        onChangeIndex={onChangeIndex}\n        slideRenderer={slideRenderer}\n        slideCount={slideCount}\n        enableMouseEvents\n      />\n      <AppBar\n        position=\"fixed\"\n        elevation={0}\n        color=\"primary\"\n        className={classes.bottomBar}>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label={t('live|previous')}\n            onClick={() => onChangeIndex(index - 1)}>\n            <NavigateBeforeIcon />\n          </IconButton>\n          <div className={classes.grow} />\n          <IconButton\n            edge=\"end\"\n            color=\"inherit\"\n            aria-label={t('live|next')}\n            onClick={() => onChangeIndex(index + 1)}>\n            <NavigateNextIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </Container>\n  );\n}\n","import React from 'react';\nimport Link from '@material-ui/core/Link';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  link: {\n    color: theme.palette.primary.contrastText,\n    textDecoration: 'underline'\n  }\n}));\n\nexport default function Description({ d }) {\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  const classes = useStyles();\n\n  if (!d) {\n    return null;\n  }\n  if (typeof d === 'string') {\n    return <p>{trans(d)}</p>;\n  }\n\n  // handles descriptions that are composed of arrays like [\"first line\", \"second line\"]\n  function processArray(lines, i = 0) {\n    return lines.map((l, j) => {\n      if (typeof l === 'string') {\n        return <p key={`line-${i}-${j}`}>{trans(l)}</p>;\n      }\n      if (Array.isArray(l)) {\n        return processArray(l, i + 1);\n      }\n      return processObject(l, `${i}-${j}`);\n    });\n  }\n\n  // handles { \"t\": \"title\", \"d\": \"description\"} like objects.\n  function processObject(obj, i) {\n    if (obj.type) {\n      const domKey = `obj-${i}`;\n      switch (obj.type) {\n        case 'link': {\n          const { key, label } = obj.payload;\n          return (\n            <Link className={classes.link} href={asset(key)} target=\"_blank\">\n              {label}\n            </Link>\n          );\n        }\n        case 'image': {\n          const { image, alt } = obj.payload;\n          return (\n            <img\n              key={domKey}\n              src={asset(image)}\n              alt={trans(alt)}\n              style={{ width: '100%' }}\n            />\n          );\n        }\n        case 'caption': {\n          const { text } = obj.payload;\n          return (\n            <Typography key={domKey} variant=\"caption\">\n              {trans(text)}\n            </Typography>\n          );\n        }\n        default:\n          break;\n      }\n    }\n\n    return (\n      <div key={`descriptionObj${i}`}>\n        {obj.t ? <h4>{trans(obj.t)}</h4> : null}\n        <Description d={obj.d} />\n      </div>\n    );\n  }\n\n  if (Array.isArray(d)) {\n    return processArray(d);\n  }\n  return processObject(d);\n}\n","import React from 'react';\nimport Description from './Description';\n\nexport default function InfoPart({ t, d }) {\n  return (\n    <div>\n      <Description d={d} />\n    </div>\n  );\n}\n","import React from 'react';\nimport InfoPart from './InfoPart';\nimport Description from './Description';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\n\nexport default function Section({ t, d, info, duration }) {\n  const trans = useAppTranslation();\n  return (\n    <div>\n      {t ? <h2>{trans(t)}</h2> : null}\n      {d ? <Description d={d} /> : null}\n      {info ? <InfoPart d={info} /> : null}\n    </div>\n  );\n}\n","export default function openUrl(url) {\n  window.open(url, '_blank', 'noopener');\n}\n","import React from 'react';\nimport openUrl from 'Utils/browser/openUrl';\nimport Button from '@material-ui/core/Button';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\nimport Description from './Description';\nimport InfoPart from './InfoPart';\n\nexport default function BasicPart({ t, d, info, payload }) {\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  return (\n    <div>\n      {t ? <h3>{trans(t)}</h3> : null}\n      {d ? <Description d={d} /> : null}\n      {payload ? (\n        <p>\n          <Button\n            variant=\"contained\"\n            onClick={() => {\n              openUrl(asset(payload.key));\n            }}>\n            {trans(payload.label)}\n          </Button>\n        </p>\n      ) : null}\n      {info ? <InfoPart d={info} /> : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport Description from './Description';\nimport InfoPart from './InfoPart';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\n\nexport default function DiscussPart({ t = 'DISCUSS', d, questions, info }) {\n  const trans = useAppTranslation();\n  let questionsElement = null;\n  if (Array.isArray(questions)) {\n    if (questions.length === 1) {\n      questionsElement = <div>{trans(questions[0])}</div>;\n    } else {\n      questionsElement = (\n        <div>\n          {questions.map((q, i) => (\n            <p key={`discussionQ${i}`}>{trans(q)}</p>\n          ))}\n        </div>\n      );\n    }\n  }\n\n  return (\n    <div>\n      {t ? <h3>{trans(t)}</h3> : null}\n      {d ? <Description d={d} /> : null}\n      {questionsElement}\n      {info ? <InfoPart d={info} /> : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport Description from './Description';\nimport InfoPart from './InfoPart';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\n\nexport default function ReadPart({ t = 'READ', d, payload }) {\n  const trans = useAppTranslation();\n  let info = null;\n  if (payload) {\n    info = payload.info;\n  }\n\n  return (\n    <div>\n      {<h3>{trans(t)}</h3>}\n      {d ? <Description d={d} /> : null}\n      {info ? <InfoPart d={info} /> : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport openUrl from 'Utils/browser/openUrl';\nimport Button from '@material-ui/core/Button';\nimport Description from './Description';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\n\nexport default function SharePart({ t = 'SHARE', d, payload }) {\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  return (\n    <div>\n      {t ? <h3>{trans(t)}</h3> : null}\n      {d ? <Description d={d} /> : null}\n      {payload ? (\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            openUrl(asset(payload.key));\n          }}\n        >\n          {trans(payload.label)}\n        </Button>\n      ) : null}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\nimport clsx from 'clsx';\n\nimport { makeStyles } from '@material-ui/core/styles';\n// NOTE see https://css-tricks.com/aspect-ratio-boxes/\n// for how to maintain aspect ratios for video placeholders\n\nconst useStyles = makeStyles(theme => ({\n  video: {\n    width: '100%'\n  },\n  aspectRatioBox: {\n    height: 0,\n    overflow: 'hidden',\n    paddingTop: 'calc(591.44 / 1127.34 * 100%)',\n    background: 'white',\n    position: 'relative',\n    border: '1px solid #ddd'\n  },\n  aspectRatioBoxInside: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%'\n  },\n  flexboxCentering: {\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '4rem',\n    color: theme.palette.text.secondary\n  }\n}));\n\n/**\n * Displays a placeholder that a user can tap on\n * in order to playback the actual video.\n */\nexport default function Video({ src, className }) {\n  const [placeholder, setPlaceholder] = useState(true);\n  const classes = useStyles();\n  return placeholder ? (\n    <div\n      className={className}\n      onClick={() => {\n        setPlaceholder(false);\n      }}\n    >\n      <div className={classes.aspectRatioBox}>\n        <div className={classes.aspectRatioBoxInside}>\n          <div className={classes.flexboxCentering}>\n            <PlayCircleFilledIcon fontSize=\"inherit\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <video\n      className={clsx(className, classes.video)}\n      src={src}\n      controls\n      autoPlay\n    ></video>\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport openUrl from 'Utils/browser/openUrl';\nimport Description from './Description';\nimport InfoPart from './InfoPart';\nimport Button from '@material-ui/core/Button';\nimport Video from 'Components/shared/Video';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\nimport { selectIsAssetOffline } from 'Redux/downloads';\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => ({\n  video: {\n    width: '100%'\n  }\n}));\n\nexport default function WatchPart({\n  t = 'WATCH',\n  d,\n  video,\n  showScript,\n  script,\n  scriptLabel,\n  info\n}) {\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  const classes = useStyles();\n  let videoUrl = video ? asset(video) : null;\n  const isAssetOffline = useSelector(state =>\n    selectIsAssetOffline(state, videoUrl)\n  );\n  if (!isAssetOffline) {\n    // for Safari videos to work we need to skip\n    // the serviceWorker because range requests aren't properly\n    // handled when the video is not already available offline.\n    videoUrl += '?skipServiceWorker=true';\n  }\n\n  return (\n    <div>\n      {t ? <h3>{trans(t)}</h3> : null}\n      {d ? <Description d={d} /> : null}\n      {info ? <InfoPart d={info} /> : null}\n      {videoUrl ? <Video className={classes.video} src={videoUrl} /> : null}\n      <br />\n      {showScript && scriptLabel ? (\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            openUrl(asset(script));\n          }}\n        >\n          {trans(scriptLabel)}\n        </Button>\n      ) : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport openUrl from 'Utils/browser/openUrl';\nimport Description from './Description';\nimport Button from '@material-ui/core/Button';\nimport Video from 'Components/shared/Video';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\nimport { selectIsAssetOffline } from 'Redux/downloads';\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => ({\n  audio: {\n    width: '100%'\n  }\n}));\n\nexport default function ListenPart({\n  t = 'LISTEN',\n  d,\n  audio,\n  script,\n  scriptLabel,\n  text // TODO replace script and scriptLabel with just text (but call it script)\n}) {\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  const classes = useStyles();\n  let audioUrl = audio ? asset(audio) : null;\n  const isAssetOffline = useSelector(state =>\n    selectIsAssetOffline(state, audioUrl)\n  );\n  if (!isAssetOffline) {\n    // for Safari audio/video to work we need to skip\n    // the serviceWorker because range requests aren't properly\n    // handled when the video is not already available offline.\n    audioUrl += '?skipServiceWorker=true';\n  }\n\n  return (\n    <div>\n      {t ? <h3>{trans(t)}</h3> : null}\n      {d ? <Description d={d} /> : null}\n      {/* NOTE for now this is still a video because we aren't storing mp3s yet */}\n      {audioUrl ? (\n        <Video className={classes.audio} src={audioUrl} controls />\n      ) : null}\n      <br />\n      {scriptLabel ? (\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            openUrl(asset(script));\n          }}\n        >\n          {trans(scriptLabel)}\n        </Button>\n      ) : null}\n      {text ? <Description d={text} /> : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Description from './Description';\nimport {\n  useAppTranslation,\n  useLocalizedAsset\n} from 'Components/zume/translationHooks';\n\nexport default function SeePart({ t, d, payload }) {\n  const trans = useAppTranslation();\n  const asset = useLocalizedAsset();\n  let image = null,\n    alt = null;\n  if (payload) {\n    image = payload.image;\n    alt = payload.alt;\n  }\n\n  return (\n    <div>\n      {<h3>{trans(t)}</h3>}\n      <Grid container spacing={1}>\n        <Grid item xs={12} sm={5} md={4}>\n          <img src={asset(image)} alt={trans(alt)} />\n        </Grid>\n        <Grid item xs={12} sm={7} md={8}>\n          {d ? <Description d={d} /> : null}\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n","import React, { forwardRef } from 'react';\nimport MaterialTable from 'material-table';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\nimport { useDispatch } from 'react-redux';\nimport { formDataUpdated } from 'Redux/forms';\nimport { cloneDeep } from 'lodash';\n\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\nconst basicVariantOptions = {\n  padding: 'dense',\n  search: false,\n  actionsColumnIndex: 3,\n  actionsCellStyle: {\n    fontSize: 'inherit'\n  },\n  headerStyle: {\n    fontSize: '0.7rem'\n  },\n  rowStyle: {\n    fontSize: '0.7rem'\n  },\n  cellStyle: {\n    fontSize: '0.7rem'\n  },\n  showFirstLastPageButtons: false,\n  pageSize: 10,\n  pageSizeOptions: [10],\n  addRowPosition: 'first',\n  emptyRowsWhenPaging: false\n};\n\nexport default function EditableTable({ title, columns, data, formName }) {\n  const trans = useAppTranslation();\n  const dispatch = useDispatch();\n\n  // NOTE since data is modified by the table even though\n  // it is immutable, we need to create a copy.\n  let clonedData = cloneDeep(data);\n\n  const localizedColumns = columns.map(c => {\n    const { title, lookup } = c;\n    const localizedC = {\n      ...c\n    };\n    if (title) {\n      localizedC.title = trans(title);\n    }\n    if (lookup) {\n      localizedC.lookup = {};\n      for (let i in lookup) {\n        localizedC.lookup[i] = trans(lookup[i]);\n      }\n    }\n    return localizedC;\n  });\n\n  const editable = {\n    onRowAdd: newRowData =>\n      new Promise((resolve, reject) => {\n        let newData = clonedData || [];\n        newData.unshift(newRowData);\n        dispatch(formDataUpdated({ name: formName, data: newData }));\n        resolve();\n      }),\n    onRowUpdate: (newRowData, oldData) =>\n      new Promise((resolve, reject) => {\n        console.log(newRowData, oldData, clonedData.indexOf(oldData));\n        const index = clonedData.indexOf(oldData);\n        clonedData[index] = newRowData;\n        dispatch(formDataUpdated({ name: formName, data: clonedData }));\n        resolve();\n      }),\n    onRowDelete: oldData =>\n      new Promise((resolve, reject) => {\n        console.log(oldData);\n        const index = clonedData.indexOf(oldData);\n        clonedData.splice(index, 1);\n        dispatch(formDataUpdated({ name: formName, data: clonedData }));\n        resolve();\n      })\n  };\n\n  let options = basicVariantOptions;\n  // TODO support other variants\n\n  return (\n    <MaterialTable\n      title={trans(title)}\n      columns={localizedColumns}\n      data={clonedData}\n      icons={tableIcons}\n      editable={editable}\n      options={options}\n    />\n  );\n}\n","import React from 'react';\nimport Description from './Description';\nimport BasicPart from './BasicPart';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\nimport typeToComponent from 'Components/shared/form/typeToComponent';\n\nexport default function FormPart({ t, d, payload, parts, data }) {\n  const trans = useAppTranslation();\n  const { name, downloadLabel, downloadKey } = payload;\n  let formElement = null;\n  if (Array.isArray(parts)) {\n    formElement = (\n      <div>\n        {parts.map((p, i) =>\n          typeToComponent(\n            p.type,\n            {\n              formName: name,\n              payload: p.payload,\n              data\n            },\n            `form-${name}-${i}`\n          )\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {t ? <h3>{trans(t)}</h3> : null}\n      {d ? <Description d={d} /> : null}\n      {downloadKey ? (\n        <BasicPart payload={{ key: downloadKey, label: downloadLabel }} />\n      ) : null}\n      {formElement}\n    </div>\n  );\n}\n","import React from 'react';\nimport EditableTable from './EditableTable';\n\nexport default function typeToComponent(type, opts, key) {\n  switch (type) {\n    case 'EditableTable':\n      let { formName, payload, data } = opts;\n      const { title, columns } = payload;\n      return (\n        <EditableTable\n          key={key}\n          formName={formName}\n          data={data}\n          title={title}\n          columns={columns}\n        />\n      );\n    default:\n      return <div key={key}></div>;\n  }\n}\n","import React from 'react';\nimport BasicPart from './BasicPart';\nimport DiscussPart from './DiscussPart';\nimport ReadPart from './ReadPart';\nimport SharePart from './SharePart';\nimport WatchPart from './WatchPart';\nimport ListenPart from './ListenPart';\nimport SeePart from './SeePart';\nimport Section from './Section';\nimport FormPart from './FormPart';\n\n/**\n * This function maps a Codex type to the view (React component)\n * needed to render it.\n */\n\nexport default function typeToView(type, content, data) {\n  switch (type) {\n    case 'section': {\n      const { t, d, info } = content;\n      return <Section t={t} d={d} info={info} />;\n    }\n    case 'watch': {\n      const { t, d, payload, info } = content;\n      const { video, script, scriptLabel } = payload;\n      return (\n        <WatchPart\n          t={t}\n          d={d}\n          video={video}\n          script={script}\n          scriptLabel={scriptLabel}\n          info={info}\n        />\n      );\n    }\n    case 'discuss': {\n      const { t, d, questions, info } = content;\n      return <DiscussPart t={t} d={d} questions={questions} info={info} />;\n    }\n    case 'read': {\n      const { t, d, payload } = content;\n      return <ReadPart t={t} d={d} payload={payload} />;\n    }\n    case 'see': {\n      const { t, d, payload } = content;\n      return <SeePart t={t} d={d} payload={payload} />;\n    }\n    case 'share': {\n      const { t, d, payload } = content;\n      return <SharePart t={t} d={d} payload={payload} />;\n    }\n    case 'listen': {\n      const { t, d, payload } = content;\n      // TODO deprecate script and scriptLabel and make\n      // text into script.\n      const { audio, script, scriptLabel, text } = payload;\n      return (\n        <ListenPart\n          t={t}\n          d={d}\n          audio={audio}\n          script={script}\n          scriptLabel={scriptLabel}\n          text={text}\n        />\n      );\n    }\n    case 'form': {\n      const { t, d, parts, payload } = content;\n      return (\n        <FormPart t={t} d={d} payload={payload} parts={parts} data={data} />\n      );\n    }\n    case 'cta':\n    default: {\n      const { t, d, info, payload } = content;\n      return <BasicPart t={t} d={d} info={info} payload={payload} />;\n    }\n  }\n}\n","import React, { useState, useEffect } from 'react';\n\n/**\n * A timer component that receives the number of minutes it should countdown from.\n * Internally, it counts down in seconds.\n */\nexport default function({ minutes }) {\n  let [remaining, setRemaining] = useState(minutes * 60);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRemaining(remaining => remaining - 1);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [minutes]);\n\n  const { negative, fm, fs } = formatRemainingTime(remaining);\n  return <span>{`${negative ? '-' : ''}${fm}:${fs}`}</span>;\n}\n\nfunction formatRemainingTime(seconds) {\n  let negative = false;\n  if (seconds < 0) {\n    negative = true;\n    seconds *= -1;\n  }\n  // TODO resolve bug in negative because when negative round needs to do the opposite.\n  // -3:29 goes to -4:30 (it's off)\n\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  let fm = m < 10 ? `0${m}` : m,\n    fs = s < 10 ? `0${s}` : s;\n  return { negative, fm, fs };\n}\n","import React, { useEffect } from 'react';\nimport LiveSessionWrapper from 'Components/shared/live/LiveSessionWrapper';\nimport Section from 'Components/shared/live/views/Section';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport liveSlice, {\n  selectPartIndex,\n  selectCurrentPartContent,\n  selectCurrentSlideIndex,\n} from 'Redux/live';\nimport { selectFormsByName } from 'Redux/forms';\nimport { totalSectionLengths } from 'Utils/session/sectionLength';\nimport { selectSession } from 'Redux/sessions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigation } from 'react-navi';\nimport { useTranslation } from 'react-i18next';\nimport useBasenameUrl from 'Utils/browser/useBasenameUrl';\nimport typeToView from 'Components/shared/live/views/typeToView';\nimport CountdownTimer from 'Components/shared/live/CountdownTimer';\n\nexport default function LiveSession({ selectedId, selectedIndex }) {\n  const session = useSelector((state) => selectSession(state, selectedId));\n  const formData = useSelector((state) =>\n    selectFormsByName(state, session?.forms)\n  );\n\n  const partIndex = useSelector(selectPartIndex);\n\n  const dispatch = useDispatch();\n  let index = useSelector(selectCurrentSlideIndex);\n  // Update our slide index based on the path\n  // Our redux components still read it from the store.\n  if (typeof selectedIndex !== 'undefined' && selectedIndex !== index) {\n    index = selectedIndex;\n    dispatch(liveSlice.actions.slideIndexChanged(index));\n  }\n\n  const sections = session?.sections;\n\n  useEffect(() => {\n    dispatch(liveSlice.actions.sectionsLoaded(sections));\n    const html = document.querySelector('html');\n    // increase root font size for in-session experience.\n    const originalFontSize = html.style.fontSize;\n    html.style.fontSize = '24px';\n    return () => {\n      html.style.fontSize = originalFontSize;\n    };\n  }, [selectedId, dispatch, sections]);\n  const content = useSelector((state) => selectCurrentPartContent(state));\n  const totalSlides = totalSectionLengths(sections);\n\n  const navigation = useNavigation();\n  const backHref = useBasenameUrl(`/session/${selectedId}`);\n  const exit = () => navigation.navigate(backHref);\n  const indexBaseHref = useBasenameUrl(`/live/${selectedId}/`);\n\n  const { t } = useTranslation();\n\n  let duration, durationKey;\n  if (content?.duration) {\n    const { sectionIndex } = content;\n    duration = content.duration;\n    durationKey = `${sectionIndex}-${duration}`;\n  }\n  if (content?.section) {\n    const { sectionIndex } = content.section;\n    duration = content.section.duration;\n    durationKey = `${sectionIndex}-${duration}`;\n  }\n\n  const slideRenderer = ({ key, index }) => {\n    // TODO hard-coding the height for now. Later we may need to\n    // make it responsive for landscape mode.\n\n    let sectionElement = null;\n    let partElement = null;\n\n    if (content) {\n      sectionElement =\n        partIndex || content.type === 'section' ? null : (\n          <Section {...content.section} />\n        );\n\n      let data = null;\n      if (content.type === 'form') {\n        // get form data if this is a form part\n        if (content.payload) {\n          const { name } = content.payload;\n          data = formData[name];\n        }\n      }\n\n      partElement = typeToView(content.type, content, data);\n    }\n\n    return (\n      <Box\n        key={key}\n        height=\"calc(100vh - 128px)\"\n        maxWidth={'960px'}\n        m=\"auto\"\n        p={3}>\n        {sectionElement}\n        {partElement}\n        {index === totalSlides - 1 ? (\n          <Button variant=\"contained\" onClick={exit}>\n            {t('live|finish')}\n          </Button>\n        ) : null}\n      </Box>\n    );\n  };\n  const onChangeIndex = (index) => {\n    navigation.navigate(indexBaseHref + index);\n  };\n\n  const countdown = duration ? (\n    <div style={{ textAlign: 'center' }}>\n      <CountdownTimer key={durationKey} minutes={duration} />\n    </div>\n  ) : null;\n\n  return (\n    <LiveSessionWrapper\n      slideRenderer={slideRenderer}\n      slideCount={totalSlides}\n      index={index}\n      onChangeIndex={onChangeIndex}\n      centerNavElement={countdown}\n      onExit={exit}\n    />\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\n\nexport default function ZumePersistButton({ onClick, children }) {\n  return (\n    <Box mb={1}>\n      <Button onClick={onClick} variant=\"outlined\" size=\"small\" color=\"primary\">\n        {children}\n      </Button>\n    </Box>\n  );\n}\n","/**\n * Adapted from https://dexie.org/docs/StorageManager#summary\n */\n\nconst HAS_STORAGE = 'storage' in navigator;\nexport const NEVER = 'never';\nexport const PERSISTED = 'persisted';\nexport const PROMPT = 'prompt';\n\n/** Check if storage is persisted already.\n  @returns {Promise<boolean>} Promise resolved with true if current origin is\n  using persistent storage, false if not, and undefined if the API is not\n  present.\n*/\nexport function isStoragePersisted() {\n  return HAS_STORAGE && navigator.storage.persisted\n    ? navigator.storage.persisted()\n    : undefined;\n}\n\n/** Tries to convert to persisted storage.\n    @returns {Promise<boolean>} Promise resolved with true if successfully\n    persisted the storage, false if not, and undefined if the API is not present.\n  */\nexport function persist() {\n  return HAS_STORAGE && navigator.storage.persist\n    ? navigator.storage.persist()\n    : undefined;\n}\n\n/** Queries available disk quota.\n    @see https://developer.mozilla.org/en-US/docs/Web/API/StorageEstimate\n    @returns {Promise<{quota: number, usage: number}>} Promise resolved with\n    {quota: number, usage: number} or undefined.\n  */\nexport function showEstimatedQuota() {\n  return HAS_STORAGE && navigator.storage.estimate\n    ? navigator.storage.estimate()\n    : undefined;\n}\n\n/** Tries to persist storage without ever prompting user.\n    @returns {Promise<string>}\n      \"never\" In case persisting is not ever possible. Caller don't bother\n        asking user for permission.\n      \"prompt\" In case persisting would be possible if prompting user first.\n      \"persisted\" In case this call successfully silently persisted the storage,\n        or if it was already persisted.\n  */\nexport async function tryPersistWithoutPromptingUser() {\n  if (!HAS_STORAGE || !navigator.storage.persisted) {\n    return NEVER;\n  }\n  let persisted = await isStoragePersisted();\n  if (persisted) {\n    return PERSISTED;\n  }\n  if (!navigator.permissions || !navigator.permissions.query) {\n    return PROMPT; // It MAY be successful to prompt. Don't know.\n  }\n  const permission = await navigator.permissions.query({\n    name: 'persistent-storage'\n  });\n  if (permission.state === 'granted') {\n    persisted = await persist();\n    if (persisted) {\n      return PERSISTED;\n    } else {\n      throw new Error('Failed to persist');\n    }\n  }\n  if (permission.state === PROMPT) {\n    return PROMPT;\n  }\n  return NEVER;\n}\n","import React from 'react';\nimport { PROMPT } from 'Redux/downloads/storage';\n\n/**\n * Displays a progress bar of the user's storage quota\n * when the storage API is available\n */\nexport default function QuotaDisplay({ data, persistButton }) {\n  if (!data) {\n    data = {};\n  }\n  const { quota, usage, persisted } = data;\n  let label = ''; //'Storage usage not available';\n  let percent = 0;\n  if (quota) {\n    label = `Storage: ${(usage / 1e6).toFixed(0)} / ${(quota / 1e6).toFixed(\n      0\n    )} mb`;\n    percent = (usage / quota) * 100;\n  }\n\n  return quota ? (\n    <div>\n      {persisted === PROMPT ? persistButton : null}\n      <div>{label}</div>\n      <progress max=\"100\" value={percent} title={label} />\n    </div>\n  ) : (\n    <div>{label}</div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    margin: theme.spacing(1),\n    position: 'relative'\n  },\n  iconButtonProgress: {\n    position: 'absolute',\n    top: 8,\n    left: 8,\n    zIndex: 1\n  }\n}));\n\nexport default function CircularIntegration({\n  variant,\n  value,\n  loading,\n  iconButton,\n  onClick\n}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.wrapper}>\n      {iconButton}\n      {loading && (\n        <CircularProgress\n          variant={variant}\n          value={value}\n          size={32}\n          className={classes.iconButtonProgress}\n          onClick={onClick}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nexport default function AlertDialog({\n  title,\n  description,\n  open,\n  handleClose,\n  actions\n}) {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      scroll=\"paper\"\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\">\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {description}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>{actions}</DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport filesize from 'filesize.js';\nimport { useTranslation } from 'react-i18next';\nimport { useAppTranslation } from 'Components/zume/translationHooks';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport DeleteIcon from '@material-ui/icons/DeleteOutline';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownloadOutlined';\nimport StopIcon from '@material-ui/icons/Stop';\nimport CircularIntegration from 'Components/shared/CircularIntegration';\nimport AlertDialog from 'Components/shared/AlertDialog';\nimport Button from '@material-ui/core/Button';\n\nexport default function SessionDownloadList({\n  sessionsWithSizes,\n  onDownload,\n  onDelete,\n  onCancel\n}) {\n  const { t } = useTranslation();\n  const trans = useAppTranslation();\n\n  if (!sessionsWithSizes || !sessionsWithSizes.length) {\n    return <div>{t('sessions|no_sessions')}</div>;\n  }\n\n  return (\n    <List>\n      {sessionsWithSizes.map(s => {\n        let actionLabel = t('downloads|download');\n        let iconButton = generateIconButton(\n          <CloudDownloadIcon />,\n          actionLabel,\n          () => onDownload(s.assetReferences)\n        );\n\n        if (s.isDownloading) {\n          actionLabel = t('downloads|downloading');\n          let cancel = () => onCancel(s.assetReferences);\n          let innerIconButton = generateIconButton(\n            <StopIcon />,\n            actionLabel,\n            cancel\n          );\n          iconButton = (\n            <CircularIntegration\n              iconButton={innerIconButton}\n              loading={true}\n              onClick={cancel}\n              variant=\"static\"\n              value={s.offlineProgress}\n            />\n          );\n        }\n\n        if (s.isQueued) {\n          actionLabel = t('downloads|queued');\n          let innerIconButton = generateIconButton(\n            <StopIcon />,\n            actionLabel,\n            () => onCancel(s.assetReferences)\n          );\n          iconButton = <CircularIntegration iconButton={innerIconButton} />;\n        }\n\n        if (s.offlineAccess || s.offlineProgress === 100) {\n          actionLabel = t('downloads|delete');\n          iconButton = generateIconButton(<DeleteIcon />, actionLabel, () =>\n            onDelete(s.assetReferences)\n          );\n        }\n\n        return (\n          <ListItem key={s.id}>\n            <ListItemText\n              primary={trans(s.t)}\n              secondary={s.size ? filesize(s.size) : null}\n            />\n            {s.hasErrors && (\n              <ErrorDialogWithButton\n                onAccept={() => {\n                  onDelete(s.assetReferences);\n                }}\n                errors={s.assetsInError}\n              />\n            )}\n            <ListItemSecondaryAction title={actionLabel}>\n              {iconButton}\n            </ListItemSecondaryAction>\n          </ListItem>\n        );\n      })}\n    </List>\n  );\n}\n\nfunction generateIconButton(icon, actionLabel, onClick) {\n  return (\n    <IconButton edge=\"end\" aria-label={actionLabel} onClick={onClick}>\n      {icon}\n    </IconButton>\n  );\n}\n\nfunction ErrorDialogWithButton({ onAccept, errors }) {\n  const { t } = useTranslation();\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const description = (\n    <React.Fragment>\n      <List>\n        {errors &&\n          errors.map((e, i) => (\n            <ListItem key={`error-${i}`}>\n              <ListItemText>\n                <a href={e.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {e.url}\n                </a>{' '}\n                {e.error.message}\n              </ListItemText>\n            </ListItem>\n          ))}\n      </List>\n    </React.Fragment>\n  );\n\n  return (\n    <React.Fragment>\n      <ListItemIcon onClick={handleClickOpen}>\n        <WarningIcon />\n      </ListItemIcon>\n      <AlertDialog\n        title={t('downloads|clear_errors')}\n        description={description}\n        open={open}\n        handleClose={handleClose}\n        actions={\n          <React.Fragment>\n            <Button onClick={handleClose} color=\"primary\">\n              {t('general|no')}\n            </Button>\n            <Button\n              onClick={() => {\n                handleClose();\n                onAccept();\n              }}\n              color=\"primary\"\n              autoFocus\n            >\n              {t('general|yes')}\n            </Button>\n          </React.Fragment>\n        }\n      />\n    </React.Fragment>\n  );\n}\n","// https://github.com/AnthumChris/fetch-progress-indicators\nexport default class ProgressReportFetcher {\n  constructor(onProgress = function() {}) {\n    this.onProgress = onProgress;\n  }\n\n  // mimic native fetch() instantiation and return Promise\n  fetch(input, init = {}) {\n    const request = input instanceof Request ? input : new Request(input);\n    this._cancelRequested = false;\n\n    return fetch(request, init).then(response => {\n      if (!response.body) {\n        throw Error(\n          'ReadableStream is not yet supported in this browser.  <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\">More Info</a>'\n        );\n      }\n\n      // this occurs if cancel() was called before server responded (before fetch() Promise resolved)\n      if (this._cancelRequested) {\n        response.body.getReader().cancel();\n        return Promise.reject('cancel requested before server responded.');\n      }\n\n      if (!response.ok) {\n        // HTTP error server response\n        throw Error(\n          `Server responded ${response.status} ${response.statusText}`\n        );\n      }\n\n      // Server must send CORS header \"Access-Control-Expose-Headers: content-length\" to access\n      const contentLength = response.headers.get('content-length');\n\n      if (contentLength === null) {\n        // don't evaluate download progress if we can't compare against a total size\n        throw Error(\n          'Content-Length server response header missing.  <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\">More Info</a>'\n        );\n      }\n\n      const total = parseInt(contentLength, 10);\n      let loaded = 0;\n\n      this._reader = response.body.getReader();\n\n      const me = this;\n\n      return new Response(\n        new ReadableStream({\n          start(controller) {\n            if (me.cancelRequested) {\n              console.log('canceling read');\n              controller.close();\n              return;\n            }\n\n            read();\n            function read() {\n              me._reader\n                .read()\n                .then(({ done, value }) => {\n                  if (done) {\n                    // ensure onProgress called when content-length=0\n                    if (total === 0) {\n                      me.onProgress.call(me, { loaded, total });\n                    }\n\n                    controller.close();\n                    return;\n                  }\n\n                  loaded += value.byteLength;\n                  me.onProgress.call(me, { loaded, total });\n                  controller.enqueue(value);\n                  read();\n                })\n                .catch(error => {\n                  console.error(error);\n                  controller.error(error);\n                });\n            }\n          }\n        })\n      );\n    });\n  }\n\n  cancel() {\n    console.log('download cancel requested.');\n    this._cancelRequested = true;\n    if (this._reader) {\n      console.log('cancelling current download');\n      return this._reader.cancel();\n    }\n    return Promise.resolve();\n  }\n}\n","import downloadsSlice, {\n  selectDownloadingAssetByUrl,\n  getNextQueuedDownload,\n  getDownloadingCount\n} from './index';\nimport { putInCache, deleteFromCache } from './cache';\nimport ProgressReportFetcher from './ProgressReportFetcher';\nimport {\n  tryPersistWithoutPromptingUser,\n  persist as persistStorage\n} from './storage';\nimport throttle from 'lodash/throttle';\n\nconst MAX_CONCURRENT_DOWNLOADS = 2;\n\nexport function download({ key, url }) {\n  return async (dispatch, getState) => {\n    dispatch(downloadsSlice.actions.downloadQueued({ key, url }));\n    // only immediately download if concurrent downloads isn't maxed out.\n    if (getDownloadingCount(getState()) <= MAX_CONCURRENT_DOWNLOADS) {\n      dispatch(startDownload({ key, url }));\n    }\n  };\n}\n\nfunction startDownload({ key, url }) {\n  // console.time();\n  return async (dispatch, getState) => {\n    const progressFetcher = new ProgressReportFetcher(\n      throttle(({ loaded, total }) => {\n        // console.timeLog();\n        return dispatch(\n          downloadsSlice.actions.downloadProgressed({ url, loaded, total })\n        );\n      }, 500)\n    );\n    const info = { key, url };\n    try {\n      dispatch(downloadsSlice.actions.downloadStarted(info));\n      const request = new Request(url);\n      // We use the progress fetcher first to get\n      // a progress update, but then we need to refetch\n      // and get the body from the cache in order to properly\n      // get CORS, headers, etc. in the response so that Safari\n      // can playback from the cache.\n      // TODO verify this does not double download/affect performance\n      await progressFetcher.fetch(request);\n      const response = await fetch(request);\n      await putInCache(request, response);\n      dispatch(downloadsSlice.actions.downloadCompleted(info));\n      dispatch(estimateUsage());\n    } catch (e) {\n      const { message, name } = e;\n      dispatch(downloadsSlice.actions.downloadCancelled(info));\n      dispatch(\n        downloadsSlice.actions.downloadErrored({\n          url: info.url,\n          error: { message, name }\n        })\n      );\n    } finally {\n      startNextDownloadIfPossible(dispatch, getState());\n    }\n  };\n}\n\nfunction startNextDownloadIfPossible(dispatch, state) {\n  const hasCapacity = getDownloadingCount(state) <= MAX_CONCURRENT_DOWNLOADS;\n  const nextQueuedDownload = getNextQueuedDownload(state);\n\n  if (hasCapacity && nextQueuedDownload) {\n    dispatch(startDownload(nextQueuedDownload));\n  }\n}\n\nexport function cancelDownload({ url }) {\n  return async (dispatch, getState) => {\n    // clear from queue and downloading\n    const downloadingAsset = selectDownloadingAssetByUrl(getState(), url);\n    if (downloadingAsset?.progressFetcher) {\n      const { progressFetcher } = downloadingAsset;\n      progressFetcher.cancel();\n    }\n    dispatch(downloadsSlice.actions.downloadCancelled({ url }));\n\n    // clear from cache\n    await deleteFromCache(url);\n\n    // clear from offlineAssets list\n    dispatch(downloadsSlice.actions.downloadDeleted({ url }));\n\n    // kick off next download\n    startNextDownloadIfPossible(dispatch, getState());\n  };\n}\n\nexport function deleteDownload({ key, url }) {\n  return async dispatch => {\n    await deleteFromCache(url);\n    dispatch(downloadsSlice.actions.downloadDeleted({ key, url }));\n    dispatch(estimateUsage());\n  };\n}\n\nconst { usageEstimated } = downloadsSlice.actions;\nexport function estimateUsage() {\n  return async dispatch => {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      let estimate = await navigator.storage.estimate();\n      dispatch(usageEstimated(estimate));\n    }\n  };\n}\n\nexport function persisted() {\n  return async dispatch => {\n    const persist = await tryPersistWithoutPromptingUser();\n    dispatch(downloadsSlice.actions.persistChecked(persist));\n  };\n}\n\nexport function persist() {\n  return async dispatch => {\n    await persistStorage(); // trigger prompt\n    const result = await tryPersistWithoutPromptingUser();\n    dispatch(downloadsSlice.actions.persistChecked(result));\n  };\n}\n","import React, { useEffect } from 'react';\nimport ZumeLogo from 'Components/zume/ZumeLogo';\nimport ZumePersistButton from 'Components/zume/ZumePersistButton';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport ZoomInFAB from 'Components/shared/ZoomInFAB';\nimport QuotaDisplay from 'Components/shared/QuotaDisplay';\nimport SessionDownloadList from 'Components/shared/session/SessionDownloadList';\nimport { selectSessionSizes, filterToDownloadableAssets } from 'Redux/sessions';\nimport { selectStorage } from 'Redux/downloads';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { useLocalizedAssetMapper } from 'Components/zume/translationHooks';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownloadOutlined';\nimport {\n  download,\n  deleteDownload,\n  cancelDownload,\n  estimateUsage,\n  persisted,\n  persist\n} from 'Redux/downloads/effects';\n\nexport default function Downloads() {\n  const { t } = useTranslation();\n  const lam = useLocalizedAssetMapper();\n  const sessionsWithSizes = useSelector(state =>\n    selectSessionSizes(state, lam)\n  );\n  const storageEstimate = useSelector(selectStorage);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(estimateUsage());\n    dispatch(persisted());\n  }, [dispatch]);\n\n  return (\n    <Container component=\"main\" maxWidth=\"sm\">\n      <Box display=\"flex\" p={1}>\n        <Box flexGrow={1}>\n          <ZumeLogo size=\"small\" />\n        </Box>\n        <Box>\n          <QuotaDisplay\n            data={storageEstimate}\n            persistButton={\n              <ZumePersistButton onClick={() => dispatch(persist())}>\n                {t('downloads|tap_to_persist')}\n              </ZumePersistButton>\n            }\n          />\n        </Box>\n      </Box>\n      <Box pb={20} pt={0} ph={0}>\n        <SessionDownloadList\n          sessionsWithSizes={sessionsWithSizes}\n          onDownload={assets =>\n            filterToDownloadableAssets(assets).forEach(a =>\n              dispatch(download(a))\n            )\n          }\n          onDelete={assets =>\n            filterToDownloadableAssets(assets).forEach(a =>\n              dispatch(deleteDownload(a))\n            )\n          }\n          onCancel={assets =>\n            filterToDownloadableAssets(assets).forEach(a =>\n              dispatch(cancelDownload(a))\n            )\n          }\n        />\n      </Box>\n      <ZoomInFAB\n        icon={CloudDownloadIcon}\n        label={t('downloads|download_all')}\n        onClick={() => {\n          sessionsWithSizes.forEach(s => {\n            if (!s.offlineAccess) {\n              filterToDownloadableAssets(s.assetReferences).forEach(a =>\n                dispatch(download(a))\n              );\n            }\n          });\n        }}>\n        {t('downloads|download_all')}\n      </ZoomInFAB>\n    </Container>\n  );\n}\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { selectAbout } from 'Redux/sessions';\nimport { useSelector } from 'react-redux';\nimport typeToView from 'Components/shared/live/views/typeToView';\nimport Section from 'Components/shared/live/views/Section';\n\nexport default function About() {\n  const about = useSelector(selectAbout);\n  return (\n    <Container component=\"main\">\n      <Box mb={8} maxWidth={'960px'}>\n        {about &&\n          about.sections.map((s, i) => (\n            <React.Fragment key={`about${i}`}>\n              <Section {...s} />\n              {s.parts\n                ? s.parts.map((p, j) => (\n                    <React.Fragment key={`about${i}-part${j}`}>\n                      {typeToView(p.type, p)}\n                    </React.Fragment>\n                  ))\n                : null}\n            </React.Fragment>\n          ))}\n      </Box>\n    </Container>\n  );\n}\n","import React from 'react';\nimport { mount, route, compose, withView } from 'navi';\nimport { View } from 'react-navi';\nimport ZumeViewWithNav from 'Components/zume/ZumeViewWithNav';\nimport App from 'Pages/App';\nimport Menu from 'Pages/Menu';\nimport Language from 'Pages/Language';\nimport Sessions from 'Pages/Sessions';\nimport LiveSession from 'Pages/LiveSession';\nimport Downloads from 'Pages/Downloads';\nimport About from 'Pages/About';\n\n/**\n * Tentative route structure:\n * /home\n * /menu\n * /session/:session_id\n * /group/:group_id\n * /gathering/:gathering_id\n * /downloads\n *\n */\n\nconst nonNavViews = ['/live'];\nconst toMount = {\n  '/': route({\n    title: 'Home',\n    view: <App />\n  }),\n  '/menu': route({\n    title: 'Menu',\n    view: <Menu />\n  }),\n  '/language': route({\n    title: 'Language',\n    view: <Language />\n  }),\n  '/session/:id': route(async req => {\n    let id = req.params.id;\n    return { title: 'Sessions', view: <Sessions selectedId={id} /> };\n  }),\n  '/downloads': route({\n    title: 'Downloads',\n    view: <Downloads />\n  }),\n  '/live/:id': route(async req => {\n    let id = req.params.id;\n    return { title: 'Live session', view: <LiveSession selectedId={id} /> };\n  }),\n  '/live/:id/:index': route(async req => {\n    let id = req.params.id;\n    let index;\n    if (!isNaN(req.params.index)) {\n      index = parseInt(req.params.index);\n    }\n    return {\n      title: 'Live session',\n      view: <LiveSession selectedId={id} selectedIndex={index} />\n    };\n  }),\n  '/about': route({\n    title: 'About',\n    view: <About />\n  })\n};\n\nconst routes = mount(toMount);\nexport default compose(\n  withView(request => {\n    if (\n      nonNavViews.some(v => {\n        return request.path.startsWith(v);\n      })\n    ) {\n      return <View />;\n    } else {\n      return (\n        <ZumeViewWithNav>\n          <View />\n        </ZumeViewWithNav>\n      );\n    }\n  }),\n  routes\n);\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = responsiveFontSizes(\n  createMuiTheme({\n    palette: {\n      primary: {\n        main: '#2CACE2',\n        contrastText: '#fff' // accessibility warning for white on the shade of blue we use\n      },\n      secondary: {\n        main: '#233469'\n      },\n      error: {\n        main: red.A400\n      },\n      background: {\n        default: '#fff'\n      }\n    }\n  })\n);\n\ntheme.typography.body1 = {\n  [theme.breakpoints.up('lg')]: {\n    fontSize: '2rem'\n  }\n};\n\ntheme.typography.body2 = {\n  [theme.breakpoints.up('lg')]: {\n    fontSize: '2.75rem'\n  }\n};\n\ntheme.typography.caption = {\n  [theme.breakpoints.up('lg')]: {\n    fontSize: '2rem'\n  }\n};\n\nexport default theme;\n","import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { create } from 'jss';\nimport rtl from 'jss-rtl';\nimport theme from './theme';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { StylesProvider, jssPreset } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport i18n from 'i18next';\nimport { syncI18nAndReduxLanguage } from './I18n';\nimport { selectLanguage } from 'Redux/language';\n\n// Configure JSS\nconst jss = create({ plugins: [...jssPreset().plugins, rtl()] });\n\nfunction RTL(props) {\n  return <StylesProvider jss={jss}>{props.children}</StylesProvider>;\n}\n\nexport default RTL;\n\n// Utilities for handling locale changes that require changing direction\n// Material-UI requires changing the theme direction and body element direction.\n// see https://material-ui.com/guides/right-to-left/\n\nexport function onRtlChange(rtl) {\n  const body = document.querySelector('body');\n  if (body.dir && !rtl) {\n    body.dir = '';\n  } else if (!body.dir && rtl) {\n    body.dir = 'rtl';\n  }\n}\n\nexport const RTLTheme = createMuiTheme({\n  ...theme,\n  direction: 'rtl'\n});\n\nexport const DirectionalOuterTheme = props => {\n  const { rtl } = useSelector(selectLanguage);\n  const onLanguageChanged = () => {\n    let currentIsRTL = i18n.dir() === 'rtl' ? true : false;\n    if (rtl !== currentIsRTL) {\n      onRtlChange(currentIsRTL);\n    }\n    syncI18nAndReduxLanguage();\n  };\n\n  useEffect(() => {\n    i18n.on('languageChanged', onLanguageChanged);\n    return () => {\n      i18n.off('languageChanged', onLanguageChanged);\n    };\n  });\n\n  return (\n    <ThemeProvider theme={rtl ? RTLTheme : theme}>\n      {props.children}\n    </ThemeProvider>\n  );\n};\n","import React from 'react';\n\nexport default function Splash() {\n  return (\n    <div className=\"splash-screen\">\n      <div className=\"splash-content\">\n        <h1>Loading</h1>\n        <div className=\"loading-dot\">.</div>\n      </div>\n    </div>\n  );\n}\n","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/browser';\nimport './index.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport 'I18n';\nimport { Router, View } from 'react-navi';\nimport * as serviceWorker from './serviceWorker';\nimport routes from './routes';\nimport RTL, { DirectionalOuterTheme } from './rtl';\nimport { Provider } from 'react-redux';\nimport store, { persistor } from 'Redux/store';\nimport { PersistGate } from 'redux-persist/es/integration/react';\nimport lifecycleSlice from 'Redux/lifecycle';\nimport { loadSessions } from 'Redux/sessions';\nimport Splash from 'Components/shared/Splash';\n\nSentry.init({\n  dsn: 'https://1b32b862f1ec42b1a86375ad94de8281@sentry.io/1840364'\n});\n\nReactDOM.render(\n  <RTL>\n    <Provider store={store}>\n      <PersistGate loading={<Splash />} persistor={persistor}>\n        <DirectionalOuterTheme>\n          <CssBaseline />\n          <Router routes={routes} basename={process.env.PUBLIC_URL || ''}>\n            <Suspense fallback={<Splash />}>\n              <View />\n            </Suspense>\n          </Router>\n        </DirectionalOuterTheme>\n      </PersistGate>\n    </Provider>\n  </RTL>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register({\n  setWorkbox: wb => {\n    store.dispatch(lifecycleSlice.actions.workboxReady(wb));\n  },\n  onUpdate: () => {\n    store.dispatch(lifecycleSlice.actions.appUpdateDetected());\n  },\n  onExternalUpdate: sw => {\n    store.dispatch(lifecycleSlice.actions.externalServiceWorkerDetected(sw));\n  }\n});\n\nwindow.addEventListener('beforeinstallprompt', e => {\n  // Prevent Chrome 76 and later from showing the mini-infobar\n  e.preventDefault();\n  store.dispatch(lifecycleSlice.actions.appInstallable(e));\n});\n\nwindow.addEventListener('appinstalled', evt => {\n  store.dispatch(lifecycleSlice.actions.appInstalled());\n});\n\nif (\n  window.navigator.standalone === true ||\n  window.matchMedia('(display-mode: standalone)').matches\n) {\n  store.dispatch(lifecycleSlice.actions.appIsStandalone());\n}\n\nstore.dispatch(lifecycleSlice.actions.firstVisitChecked());\nstore.dispatch(loadSessions());\n"],"sourceRoot":""}